<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Aide-m√©moire Shell Linux/Bash : commandes essentielles pour naviguer et g√©rer les fichiers.">
    <title>Shell Linux - IT Cheatsheets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="dark-theme text-slate-200">

    <header class="bg-slate-900/50 border-b border-white/5 py-8 px-4 relative overflow-hidden header-glow">
        <div class="max-w-4xl mx-auto relative z-10">
            <div class="flex items-center justify-between mb-4">
                <a href="../index.html" class="nav-back inline-flex items-center text-slate-400 hover:text-sky-400 transition">
                    <i class="fas fa-arrow-left mr-2"></i>Retour
                </a>
                <a href="../index.html" class="inline-flex items-center text-slate-400 hover:text-sky-400 transition">
                    <i class="fas fa-home mr-2"></i>Accueil
                </a>
            </div>
            <div class="text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-xl bg-gray-500/20 mb-4 icon-glow">
                    <i class="fas fa-terminal text-3xl text-gray-300"></i>
                </div>
                <h1 class="text-3xl font-bold mb-2 gradient-text">Shell Linux</h1>
                <p class="text-slate-400">Commandes Bash indispensables pour naviguer et g√©rer les fichiers</p>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 relative z-10">
        <div class="mb-8 relative">
            <input type="text" id="searchInput" placeholder="Rechercher une commande..."
                   class="search-dark w-full p-4 pl-12 rounded-lg outline-none transition">
            <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500"></i>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="categoriesGrid"></div>
    </main>

    <div id="detailModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50 p-4 modal-overlay" onclick="closeModal(event)">
        <div class="modal-content-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl modal-content" onclick="event.stopPropagation()">
            <div id="modalContent"></div>
        </div>
    </div>

    <footer class="border-t border-white/5 text-center text-slate-500 py-8 text-sm relative z-10">
        <p>¬© 2026 - Dr FENOHASINA Toto Jean Felicien</p>
    </footer>

    <script>
        const cheatsheetData = [
            {
                id: 'navigation',
                title: 'Navigation',
                icon: 'fa-compass',
                color: 'border-l-4 border-blue-500',
                commands: [
                    {
                        cmd: 'cd chemin',
                        desc: 'Changer de r√©pertoire',
                        details: {
                            explanation: 'Change le r√©pertoire de travail courant. C\'est la commande la plus utilis√©e pour naviguer.',
                            syntax: 'cd [chemin]',
                            options: [
                                { flag: 'cd', desc: 'Retour au r√©pertoire personnel (~)' },
                                { flag: 'cd ..', desc: 'Remonter d\'un niveau' },
                                { flag: 'cd -', desc: 'Retour au r√©pertoire pr√©c√©dent' },
                                { flag: 'cd /', desc: 'Aller √† la racine' }
                            ],
                            examples: [
                                { code: 'cd /var/www', desc: 'Chemin absolu' },
                                { code: 'cd ../projet', desc: 'Chemin relatif' },
                                { code: 'cd ~', desc: 'R√©pertoire personnel' }
                            ],
                            tips: ['Utilisez Tab pour l\'autocompl√©tion des chemins'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'ls',
                        desc: 'Lister le contenu d\'un r√©pertoire',
                        details: {
                            explanation: 'Affiche la liste des fichiers et dossiers dans le r√©pertoire courant ou sp√©cifi√©.',
                            syntax: 'ls [options] [chemin]',
                            options: [
                                { flag: '-l', desc: 'Format long (d√©tails)' },
                                { flag: '-a', desc: 'Afficher les fichiers cach√©s' },
                                { flag: '-h', desc: 'Tailles lisibles (Ko, Mo)' },
                                { flag: '-R', desc: 'R√©cursif' },
                                { flag: '-t', desc: 'Trier par date' }
                            ],
                            examples: [
                                { code: 'ls -la', desc: 'Liste d√©taill√©e avec fichiers cach√©s' },
                                { code: 'ls -lh *.txt', desc: 'Fichiers .txt avec tailles lisibles' }
                            ],
                            tips: ['Alias courant: ll = ls -la'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'pwd',
                        desc: 'Afficher le r√©pertoire courant',
                        details: {
                            explanation: 'Print Working Directory - affiche le chemin absolu du r√©pertoire actuel.',
                            syntax: 'pwd',
                            options: [],
                            examples: [
                                { code: 'pwd', desc: 'Affiche ex: /home/user/projet' }
                            ],
                            tips: ['Utile dans les scripts pour v√©rifier l\'emplacement'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'files',
                title: 'Gestion des fichiers',
                icon: 'fa-file',
                color: 'border-l-4 border-green-500',
                commands: [
                    {
                        cmd: 'cp source destination',
                        desc: 'Copier fichiers/dossiers',
                        details: {
                            explanation: 'Copie un fichier ou un dossier vers une nouvelle destination.',
                            syntax: 'cp [options] source destination',
                            options: [
                                { flag: '-r', desc: 'R√©cursif (pour les dossiers)' },
                                { flag: '-i', desc: 'Demander confirmation avant √©crasement' },
                                { flag: '-v', desc: 'Mode verbeux' },
                                { flag: '-p', desc: 'Pr√©server les attributs' }
                            ],
                            examples: [
                                { code: 'cp fichier.txt copie.txt', desc: 'Copier un fichier' },
                                { code: 'cp -r dossier/ backup/', desc: 'Copier un dossier r√©cursivement' }
                            ],
                            tips: ['Utilisez -i pour √©viter d\'√©craser par erreur'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'mv source destination',
                        desc: 'D√©placer/renommer',
                        details: {
                            explanation: 'D√©place un fichier/dossier ou le renomme si la destination est dans le m√™me r√©pertoire.',
                            syntax: 'mv [options] source destination',
                            options: [
                                { flag: '-i', desc: 'Demander confirmation' },
                                { flag: '-v', desc: 'Mode verbeux' }
                            ],
                            examples: [
                                { code: 'mv ancien.txt nouveau.txt', desc: 'Renommer' },
                                { code: 'mv fichier.txt /tmp/', desc: 'D√©placer vers /tmp' },
                                { code: 'mv *.jpg images/', desc: 'D√©placer tous les jpg' }
                            ],
                            tips: ['mv fonctionne pour renommer ET d√©placer'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'rm fichier',
                        desc: 'Supprimer fichiers/dossiers',
                        details: {
                            explanation: 'Supprime d√©finitivement des fichiers ou dossiers. Pas de corbeille !',
                            syntax: 'rm [options] fichier(s)',
                            options: [
                                { flag: '-r', desc: 'R√©cursif (dossiers)' },
                                { flag: '-f', desc: 'Forcer sans confirmation' },
                                { flag: '-i', desc: 'Demander confirmation' },
                                { flag: '-v', desc: 'Mode verbeux' }
                            ],
                            examples: [
                                { code: 'rm fichier.txt', desc: 'Supprimer un fichier' },
                                { code: 'rm -r dossier/', desc: 'Supprimer un dossier et son contenu' },
                                { code: 'rm -i *.log', desc: 'Supprimer avec confirmation' }
                            ],
                            tips: ['Utilisez rm -i pour √©viter les erreurs'],
                            warnings: ['rm -rf est irr√©versible ! V√©rifiez deux fois avant d\'ex√©cuter.']
                        }
                    }
                ]
            },
            {
                id: 'permissions',
                title: 'Permissions',
                icon: 'fa-lock',
                color: 'border-l-4 border-purple-500',
                commands: [
                    {
                        cmd: 'chmod mode fichier',
                        desc: 'Modifier les permissions',
                        details: {
                            explanation: 'Change les permissions de lecture (r), √©criture (w) et ex√©cution (x) d\'un fichier.',
                            syntax: 'chmod [options] mode fichier',
                            options: [
                                { flag: '-R', desc: 'R√©cursif' },
                                { flag: '755', desc: 'rwxr-xr-x (script ex√©cutable)' },
                                { flag: '644', desc: 'rw-r--r-- (fichier normal)' },
                                { flag: '+x', desc: 'Ajouter le droit d\'ex√©cution' }
                            ],
                            examples: [
                                { code: 'chmod +x script.sh', desc: 'Rendre ex√©cutable' },
                                { code: 'chmod 755 script.sh', desc: 'Permissions classiques pour script' },
                                { code: 'chmod -R 644 dossier/', desc: 'Appliquer r√©cursivement' }
                            ],
                            tips: ['7=rwx, 5=r-x, 4=r--, 0=---'],
                            warnings: ['chmod 777 donne tous les droits √† tous - risque de s√©curit√©']
                        }
                    },
                    {
                        cmd: 'chown user:group fichier',
                        desc: 'Changer le propri√©taire',
                        details: {
                            explanation: 'Change le propri√©taire et/ou le groupe d\'un fichier ou dossier.',
                            syntax: 'chown [options] user[:group] fichier',
                            options: [
                                { flag: '-R', desc: 'R√©cursif' },
                                { flag: 'user:', desc: 'Changer aussi le groupe en celui de l\'utilisateur' }
                            ],
                            examples: [
                                { code: 'chown www-data fichier.txt', desc: 'Changer le propri√©taire' },
                                { code: 'chown www-data:www-data /var/www', desc: 'Propri√©taire et groupe' },
                                { code: 'sudo chown -R $USER:$USER projet/', desc: 'R√©cup√©rer la propri√©t√© d\'un dossier' }
                            ],
                            tips: ['N√©cessite souvent sudo'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'search',
                title: 'Recherche & Texte',
                icon: 'fa-search',
                color: 'border-l-4 border-orange-500',
                commands: [
                    {
                        cmd: 'grep motif fichier',
                        desc: 'Rechercher dans un fichier',
                        details: {
                            explanation: 'Recherche des lignes contenant un motif dans un fichier ou une entr√©e.',
                            syntax: 'grep [options] motif fichier(s)',
                            options: [
                                { flag: '-i', desc: 'Ignorer la casse' },
                                { flag: '-r', desc: 'R√©cursif dans les dossiers' },
                                { flag: '-n', desc: 'Afficher les num√©ros de ligne' },
                                { flag: '-v', desc: 'Inverser (lignes ne contenant PAS)' },
                                { flag: '-c', desc: 'Compter les occurrences' }
                            ],
                            examples: [
                                { code: 'grep "erreur" log.txt', desc: 'Chercher "erreur" dans log.txt' },
                                { code: 'grep -ri "TODO" src/', desc: 'Chercher TODO dans src/ (r√©cursif, insensible casse)' },
                                { code: 'cat fichier | grep motif', desc: 'Avec pipe' }
                            ],
                            tips: ['Combinez avec | (pipe) pour filtrer la sortie d\'autres commandes'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'find chemin -name motif',
                        desc: 'Trouver des fichiers',
                        details: {
                            explanation: 'Recherche des fichiers selon diff√©rents crit√®res (nom, taille, date, etc.).',
                            syntax: 'find chemin [expressions]',
                            options: [
                                { flag: '-name', desc: 'Recherche par nom (sensible casse)' },
                                { flag: '-iname', desc: 'Recherche par nom (insensible casse)' },
                                { flag: '-type f/d', desc: 'Fichiers (f) ou dossiers (d)' },
                                { flag: '-mtime -7', desc: 'Modifi√©s il y a moins de 7 jours' },
                                { flag: '-size +10M', desc: 'Plus de 10 Mo' }
                            ],
                            examples: [
                                { code: 'find . -name "*.py"', desc: 'Fichiers Python dans le dossier courant' },
                                { code: 'find /var -type f -size +100M', desc: 'Fichiers > 100 Mo dans /var' },
                                { code: 'find . -name "*.tmp" -delete', desc: 'Trouver et supprimer les .tmp' }
                            ],
                            tips: ['Utilisez -exec pour ex√©cuter une commande sur chaque r√©sultat'],
                            warnings: ['Attention avec -delete, pas de confirmation !']
                        }
                    }
                ]
            },
            {
                id: 'processes',
                title: 'Gestion des Processus',
                icon: 'fa-microchip',
                color: 'border-l-4 border-cyan-500',
                commands: [
                    {
                        cmd: 'ps aux',
                        desc: 'Lister les processus',
                        details: {
                            explanation: 'Affiche la liste des processus en cours d\'ex√©cution avec leurs d√©tails.',
                            syntax: 'ps [options]',
                            options: [
                                { flag: 'aux', desc: 'Tous les processus (format BSD)' },
                                { flag: '-ef', desc: 'Tous les processus (format System V)' },
                                { flag: '-u user', desc: 'Processus d\'un utilisateur' },
                                { flag: '--forest', desc: 'Vue arborescente' },
                                { flag: '-p PID', desc: 'Processus sp√©cifique' }
                            ],
                            examples: [
                                { code: 'ps aux', desc: 'Tous les processus' },
                                { code: 'ps aux | grep nginx', desc: 'Filtrer par nom' },
                                { code: 'ps aux --sort=-%mem | head', desc: 'Top consommateurs m√©moire' },
                                { code: 'ps -ef --forest', desc: 'Arbre des processus' }
                            ],
                            tips: ['Combinez avec grep pour filtrer les r√©sultats'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'kill / killall',
                        desc: 'Terminer des processus',
                        details: {
                            explanation: 'Envoie des signaux aux processus pour les contr√¥ler ou les terminer.',
                            syntax: 'kill [signal] PID
killall [signal] nom',
                            options: [
                                { flag: '-15 (SIGTERM)', desc: 'Terminer proprement (d√©faut)' },
                                { flag: '-9 (SIGKILL)', desc: 'Forcer l\'arr√™t imm√©diat' },
                                { flag: '-1 (SIGHUP)', desc: 'Recharger la configuration' },
                                { flag: '-l', desc: 'Lister tous les signaux' }
                            ],
                            examples: [
                                { code: 'kill 1234', desc: 'Terminer le processus 1234' },
                                { code: 'kill -9 1234', desc: 'Forcer l\'arr√™t' },
                                { code: 'killall firefox', desc: 'Tuer tous les processus firefox' },
                                { code: 'pkill -f "python script.py"', desc: 'Tuer par ligne de commande' }
                            ],
                            tips: ['Essayez d\'abord SIGTERM, puis SIGKILL si n√©cessaire'],
                            warnings: ['kill -9 ne permet pas au processus de se terminer proprement']
                        }
                    },
                    {
                        cmd: 'bg / fg / jobs',
                        desc: 'Processus en arri√®re-plan',
                        details: {
                            explanation: 'G√®re les processus en arri√®re-plan et premier plan dans le shell.',
                            syntax: 'bg [job_id]
fg [job_id]
jobs',
                            options: [
                                { flag: 'Ctrl+Z', desc: 'Suspendre le processus courant' },
                                { flag: 'bg', desc: 'Reprendre en arri√®re-plan' },
                                { flag: 'fg', desc: 'Reprendre en premier plan' },
                                { flag: 'jobs', desc: 'Lister les jobs' },
                                { flag: '&', desc: 'Lancer en arri√®re-plan' }
                            ],
                            examples: [
                                { code: 'sleep 100 &', desc: 'Lancer en arri√®re-plan' },
                                { code: 'Ctrl+Z puis bg', desc: 'Mettre en arri√®re-plan' },
                                { code: 'jobs', desc: 'Voir les jobs actifs' },
                                { code: 'fg %1', desc: 'Ramener le job 1 au premier plan' }
                            ],
                            tips: ['& √† la fin d\'une commande la lance en arri√®re-plan'],
                            warnings: ['Les jobs meurent si vous fermez le terminal (utilisez nohup ou tmux)']
                        }
                    },
                    {
                        cmd: 'nohup / disown',
                        desc: 'Processus persistants',
                        details: {
                            explanation: 'Permet √† un processus de continuer apr√®s la fermeture du terminal.',
                            syntax: 'nohup commande &
disown job_id',
                            options: [
                                { flag: 'nohup', desc: 'Immunise contre SIGHUP' },
                                { flag: 'disown', desc: 'D√©tache un job existant' },
                                { flag: '&', desc: 'Lancer en arri√®re-plan' }
                            ],
                            examples: [
                                { code: 'nohup ./long_script.sh &', desc: 'Script qui survit au logout' },
                                { code: 'nohup python train.py > output.log 2>&1 &', desc: 'Avec redirection' },
                                { code: 'disown %1', desc: 'D√©tacher le job 1' },
                                { code: 'nohup ./server.sh </dev/null &>/dev/null &', desc: 'Compl√®tement d√©tach√©' }
                            ],
                            tips: ['La sortie va par d√©faut dans nohup.out'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'text-processing',
                title: 'Traitement de Texte',
                icon: 'fa-align-left',
                color: 'border-l-4 border-pink-500',
                commands: [
                    {
                        cmd: 'awk',
                        desc: 'Traitement de texte structur√©',
                        details: {
                            explanation: 'Langage puissant pour traiter des donn√©es en colonnes et g√©n√©rer des rapports.',
                            syntax: 'awk \'pattern {action}\' fichier',
                            options: [
                                { flag: '-F":"', desc: 'D√©finir le s√©parateur de champ' },
                                { flag: '$1, $2...', desc: 'Colonnes (champs)' },
                                { flag: '$0', desc: 'Ligne compl√®te' },
                                { flag: 'NR', desc: 'Num√©ro de ligne' },
                                { flag: 'NF', desc: 'Nombre de champs' }
                            ],
                            examples: [
                                { code: 'awk \'{print $1}\' fichier', desc: 'Premi√®re colonne' },
                                { code: 'awk -F: \'{print $1, $3}\' /etc/passwd', desc: 'Users et UIDs' },
                                { code: 'awk \'$3 > 100 {print $1}\' data.txt', desc: 'Si colonne 3 > 100' },
                                { code: 'awk \'{sum+=$1} END {print sum}\' nums.txt', desc: 'Somme d\'une colonne' }
                            ],
                            tips: ['BEGIN et END pour des actions avant/apr√®s le traitement'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'sed',
                        desc: '√âditeur de flux',
                        details: {
                            explanation: 'Stream editor pour transformer du texte √† la vol√©e.',
                            syntax: 'sed [options] \'commande\' fichier',
                            options: [
                                { flag: 's/old/new/', desc: 'Substitution (premi√®re occurrence)' },
                                { flag: 's/old/new/g', desc: 'Substitution globale' },
                                { flag: '-i', desc: 'Modifier le fichier en place' },
                                { flag: '-n', desc: 'Mode silencieux (avec p pour print)' },
                                { flag: 'd', desc: 'Supprimer des lignes' }
                            ],
                            examples: [
                                { code: 'sed \'s/foo/bar/g\' file.txt', desc: 'Remplacer foo par bar' },
                                { code: 'sed -i \'s/old/new/g\' file.txt', desc: 'Modifier en place' },
                                { code: 'sed -n \'5,10p\' file.txt', desc: 'Lignes 5 √† 10' },
                                { code: 'sed \'/^#/d\' config.txt', desc: 'Supprimer les commentaires' }
                            ],
                            tips: ['Utilisez -i.bak pour cr√©er une sauvegarde avant modification'],
                            warnings: ['-i modifie directement le fichier !']
                        }
                    },
                    {
                        cmd: 'cut / sort / uniq',
                        desc: 'Manipulation de colonnes',
                        details: {
                            explanation: 'Outils pour extraire, trier et d√©dupliquer des donn√©es.',
                            syntax: 'cut -d":" -f1 fichier
sort [options] fichier
uniq [options]',
                            options: [
                                { flag: 'cut -d', desc: 'D√©limiteur' },
                                { flag: 'cut -f1,3', desc: 'Champs 1 et 3' },
                                { flag: 'sort -n', desc: 'Tri num√©rique' },
                                { flag: 'sort -r', desc: 'Tri invers√©' },
                                { flag: 'uniq -c', desc: 'Compter les occurrences' }
                            ],
                            examples: [
                                { code: 'cut -d: -f1 /etc/passwd', desc: 'Extraire les usernames' },
                                { code: 'sort -t: -k3 -n /etc/passwd', desc: 'Trier par UID' },
                                { code: 'sort file.txt | uniq -c | sort -rn', desc: 'Top occurrences' },
                                { code: 'cut -d, -f2 data.csv | sort | uniq', desc: 'Valeurs uniques colonne 2' }
                            ],
                            tips: ['uniq n√©cessite que les donn√©es soient tri√©es !'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'wc / head / tail',
                        desc: 'Statistiques et aper√ßus',
                        details: {
                            explanation: 'Compter les lignes/mots et afficher le d√©but ou la fin des fichiers.',
                            syntax: 'wc [options] fichier
head/tail [-n N] fichier',
                            options: [
                                { flag: 'wc -l', desc: 'Compter les lignes' },
                                { flag: 'wc -w', desc: 'Compter les mots' },
                                { flag: 'wc -c', desc: 'Compter les octets' },
                                { flag: 'head -n 10', desc: 'Premi√®res 10 lignes' },
                                { flag: 'tail -f', desc: 'Suivre en temps r√©el' }
                            ],
                            examples: [
                                { code: 'wc -l *.py', desc: 'Lignes par fichier Python' },
                                { code: 'head -n 20 file.txt', desc: '20 premi√®res lignes' },
                                { code: 'tail -f /var/log/syslog', desc: 'Suivre les logs' },
                                { code: 'tail -n +2 data.csv', desc: 'Tout sauf l\'en-t√™te' }
                            ],
                            tips: ['tail -f est indispensable pour suivre les logs en temps r√©el'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'archives',
                title: 'Archives & Compression',
                icon: 'fa-file-archive',
                color: 'border-l-4 border-yellow-500',
                commands: [
                    {
                        cmd: 'tar',
                        desc: 'Archiver des fichiers',
                        details: {
                            explanation: 'Cr√©e et extrait des archives tar, avec ou sans compression.',
                            syntax: 'tar [options] archive.tar fichiers',
                            options: [
                                { flag: '-c', desc: 'Cr√©er une archive' },
                                { flag: '-x', desc: 'Extraire une archive' },
                                { flag: '-v', desc: 'Mode verbeux' },
                                { flag: '-f', desc: 'Sp√©cifier le fichier archive' },
                                { flag: '-z', desc: 'Compression gzip (.tar.gz)' },
                                { flag: '-j', desc: 'Compression bzip2 (.tar.bz2)' },
                                { flag: '-J', desc: 'Compression xz (.tar.xz)' }
                            ],
                            examples: [
                                { code: 'tar -cvf archive.tar dossier/', desc: 'Cr√©er une archive' },
                                { code: 'tar -czvf archive.tar.gz dossier/', desc: 'Archive compress√©e gzip' },
                                { code: 'tar -xzvf archive.tar.gz', desc: 'Extraire un .tar.gz' },
                                { code: 'tar -xzvf archive.tar.gz -C /destination/', desc: 'Extraire vers un dossier' }
                            ],
                            tips: ['Mn√©motechnique: c=create, x=extract, v=verbose, f=file, z=gzip'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'gzip / gunzip',
                        desc: 'Compression gzip',
                        details: {
                            explanation: 'Compresse ou d√©compresse des fichiers individuels avec gzip.',
                            syntax: 'gzip [options] fichier
gunzip fichier.gz',
                            options: [
                                { flag: '-k', desc: 'Garder le fichier original' },
                                { flag: '-d', desc: 'D√©compresser' },
                                { flag: '-9', desc: 'Compression maximale' },
                                { flag: '-l', desc: 'Lister le contenu' }
                            ],
                            examples: [
                                { code: 'gzip fichier.txt', desc: 'Compresser (remplace l\'original)' },
                                { code: 'gzip -k fichier.txt', desc: 'Compresser en gardant l\'original' },
                                { code: 'gunzip fichier.txt.gz', desc: 'D√©compresser' },
                                { code: 'zcat fichier.gz', desc: 'Lire sans d√©compresser' }
                            ],
                            tips: ['zcat, zgrep, zless permettent de lire les .gz sans les extraire'],
                            warnings: ['Sans -k, gzip supprime le fichier original']
                        }
                    },
                    {
                        cmd: 'zip / unzip',
                        desc: 'Archives ZIP',
                        details: {
                            explanation: 'Cr√©e et extrait des archives au format ZIP (compatible Windows).',
                            syntax: 'zip [options] archive.zip fichiers
unzip archive.zip',
                            options: [
                                { flag: '-r', desc: 'R√©cursif (dossiers)' },
                                { flag: '-e', desc: 'Chiffrer avec mot de passe' },
                                { flag: '-d', desc: 'Destination pour unzip' },
                                { flag: '-l', desc: 'Lister le contenu' }
                            ],
                            examples: [
                                { code: 'zip -r archive.zip dossier/', desc: 'Cr√©er un ZIP' },
                                { code: 'zip -re secure.zip dossier/', desc: 'ZIP avec mot de passe' },
                                { code: 'unzip archive.zip', desc: 'Extraire' },
                                { code: 'unzip archive.zip -d /destination/', desc: 'Extraire vers un dossier' }
                            ],
                            tips: ['Format ZIP id√©al pour partager avec des utilisateurs Windows'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'scripting',
                title: 'Scripting Bash',
                icon: 'fa-code',
                color: 'border-l-4 border-indigo-500',
                commands: [
                    {
                        cmd: 'Variables & Param√®tres',
                        desc: 'D√©finir et utiliser des variables',
                        details: {
                            explanation: 'Les variables stockent des donn√©es r√©utilisables dans les scripts.',
                            syntax: 'VAR="valeur"
echo $VAR',
                            options: [
                                { flag: '$1, $2...', desc: 'Arguments du script' },
                                { flag: '$#', desc: 'Nombre d\'arguments' },
                                { flag: '$@', desc: 'Tous les arguments' },
                                { flag: '$?', desc: 'Code retour derni√®re commande' },
                                { flag: '$$', desc: 'PID du script' }
                            ],
                            examples: [
                                { code: '#!/bin/bash
NAME="World"
echo "Hello, $NAME!"', desc: 'Variable simple' },
                                { code: 'FILE=${1:-"default.txt"}', desc: 'Valeur par d√©faut' },
                                { code: 'DIR=$(pwd)', desc: 'Capture de sortie commande' },
                                { code: 'readonly PI=3.14159', desc: 'Variable constante' }
                            ],
                            tips: ['Utilisez ${VAR} pour √©viter les ambigu√Øt√©s'],
                            warnings: ['Pas d\'espaces autour du = lors de l\'assignation']
                        }
                    },
                    {
                        cmd: 'Conditions if/else',
                        desc: 'Ex√©cution conditionnelle',
                        details: {
                            explanation: 'Ex√©cute du code selon des conditions.',
                            syntax: 'if [ condition ]; then
  commandes
fi',
                            options: [
                                { flag: '-f fichier', desc: 'Fichier existe' },
                                { flag: '-d dossier', desc: 'Dossier existe' },
                                { flag: '-z "$VAR"', desc: 'Variable vide' },
                                { flag: '-n "$VAR"', desc: 'Variable non vide' },
                                { flag: '-eq, -ne, -lt, -gt', desc: 'Comparaisons num√©riques' }
                            ],
                            examples: [
                                { code: 'if [ -f "config.txt" ]; then
  echo "Config trouv√©e"
else
  echo "Config manquante"
fi', desc: 'Test fichier' },
                                { code: 'if [ "$USER" = "root" ]; then
  echo "Vous √™tes root"
fi', desc: 'Test string' },
                                { code: '[ -d "$DIR" ] || mkdir -p "$DIR"', desc: 'Cr√©er si n\'existe pas' },
                                { code: '[[ "$FILE" == *.txt ]] && echo "Fichier texte"', desc: 'Pattern matching' }
                            ],
                            tips: ['[[ ]] est plus puissant que [ ] (bash uniquement)'],
                            warnings: ['Toujours mettre les variables entre guillemets']
                        }
                    },
                    {
                        cmd: 'Boucles for/while',
                        desc: 'It√©rations',
                        details: {
                            explanation: 'R√©p√®te des commandes sur une liste ou selon une condition.',
                            syntax: 'for item in liste; do
  commandes
done',
                            options: [
                                { flag: 'for i in {1..10}', desc: 'S√©quence de nombres' },
                                { flag: 'for f in *.txt', desc: 'Glob pattern' },
                                { flag: 'while read line', desc: 'Lire ligne par ligne' },
                                { flag: 'break/continue', desc: 'Contr√¥le de boucle' }
                            ],
                            examples: [
                                { code: 'for f in *.log; do
  gzip "$f"
done', desc: 'Compresser tous les logs' },
                                { code: 'for i in {1..5}; do
  echo "It√©ration $i"
done', desc: 'Boucle num√©rique' },
                                { code: 'while read -r line; do
  echo "Ligne: $line"
done < fichier.txt', desc: 'Lire un fichier' },
                                { code: 'while true; do
  sleep 60
  ./check.sh
done', desc: 'Boucle infinie' }
                            ],
                            tips: ['Utilisez read -r pour √©viter l\'interpr√©tation des backslashes'],
                            warnings: ['Attention aux espaces dans les noms de fichiers avec for']
                        }
                    },
                    {
                        cmd: 'Fonctions & Exit codes',
                        desc: 'Modulariser et g√©rer les erreurs',
                        details: {
                            explanation: 'Les fonctions organisent le code, les exit codes indiquent le succ√®s/√©chec.',
                            syntax: 'function_name() {
  commandes
  return code
}',
                            options: [
                                { flag: 'set -e', desc: 'Arr√™ter sur erreur' },
                                { flag: 'set -x', desc: 'Mode debug (trace)' },
                                { flag: 'trap', desc: 'Capturer les signaux' },
                                { flag: 'exit N', desc: 'Quitter avec code N' }
                            ],
                            examples: [
                                { code: 'log() {
  echo "[$(date)] $1"
}
log "Script d√©marr√©"', desc: 'Fonction de log' },
                                { code: 'set -euo pipefail
# Script robuste', desc: 'Mode strict' },
                                { code: 'trap "rm -f $TMPFILE" EXIT', desc: 'Nettoyage √† la sortie' },
                                { code: 'die() { echo "$1" >&2; exit 1; }
[ -f "$FILE" ] || die "Fichier manquant"', desc: 'Fonction d\'erreur' }
                            ],
                            tips: ['set -euo pipefail est recommand√© pour les scripts robustes'],
                            warnings: ['Exit code 0 = succ√®s, autre = √©chec']
                        }
                    }
                ]
            },
            {
                id: 'project-automation',
                title: 'üöÄ Projet: Script d\'Automatisation',
                icon: 'fa-rocket',
                color: 'border-l-4 border-emerald-500',
                commands: [
                    {
                        cmd: '√âtape 1: Structure du script',
                        desc: 'Base robuste avec gestion d\'erreurs',
                        details: {
                            explanation: 'Cr√©er un script bash professionnel avec header, options et gestion d\'erreurs.',
                            syntax: '#!/bin/bash
set -euo pipefail',
                            options: [],
                            examples: [
                                { code: '#!/bin/bash
#
# Script: deploy.sh
# Description: D√©ploiement automatis√©
# Usage: ./deploy.sh [env] [options]
#
set -euo pipefail
IFS=$\'\n\\t\'

# Variables globales
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
LOG_FILE="/var/log/deploy.log"
ENV="${1:-production}"

# Couleurs pour le terminal
RED=\'\\033[0;31m\'
GREEN=\'\\033[0;32m\'
NC=\'\\033[0m\' # No Color', desc: 'En-t√™te complet' }
                            ],
                            tips: ['set -euo pipefail rend le script plus robuste'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 2: Fonctions utilitaires',
                        desc: 'Logging, erreurs, confirmations',
                        details: {
                            explanation: 'Fonctions r√©utilisables pour logger, afficher des erreurs et demander des confirmations.',
                            syntax: 'log() { ... }
error() { ... }',
                            options: [],
                            examples: [
                                { code: '# Logging
log() {
  local level="$1"; shift
  echo -e "[$(date \'+%Y-%m-%d %H:%M:%S\')] [$level] $*" | tee -a "$LOG_FILE"
}

info() { log "INFO" "$@"; }
warn() { log "WARN" "${YELLOW}$*${NC}"; }
error() { log "ERROR" "${RED}$*${NC}" >&2; }

# Gestion d\'erreurs
die() {
  error "$1"
  exit "${2:-1}"
}

# Confirmation
confirm() {
  read -r -p "$1 [y/N] " response
  [[ "$response" =~ ^[Yy]$ ]]
}', desc: 'Fonctions utilitaires' }
                            ],
                            tips: ['Utilisez tee pour logger √† la fois dans le fichier et le terminal'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 3: Parsing des arguments',
                        desc: 'Options et flags avec getopts',
                        details: {
                            explanation: 'Traiter les arguments de ligne de commande de mani√®re professionnelle.',
                            syntax: 'while getopts "vh" opt; do ...',
                            options: [],
                            examples: [
                                { code: '# Valeurs par d√©faut
VERBOSE=false
DRY_RUN=false
TARGET_ENV="production"

# Aide
usage() {
  cat << EOF
Usage: $0 [options] [environment]

Options:
  -v, --verbose    Mode verbeux
  -n, --dry-run    Simulation sans ex√©cution
  -h, --help       Afficher cette aide

Environments: staging, production (d√©faut)
EOF
  exit 0
}

# Parsing
while [[ $# -gt 0 ]]; do
  case "$1" in
    -v|--verbose) VERBOSE=true; shift ;;
    -n|--dry-run) DRY_RUN=true; shift ;;
    -h|--help) usage ;;
    -*) die "Option inconnue: $1" ;;
    *) TARGET_ENV="$1"; shift ;;
  esac
done', desc: 'Parsing complet' }
                            ],
                            tips: ['Supportez les options courtes (-v) et longues (--verbose)'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 4: V√©rifications pr√©alables',
                        desc: 'Pr√©requis et validations',
                        details: {
                            explanation: 'V√©rifier que l\'environnement est correct avant d\'ex√©cuter le script.',
                            syntax: 'check_requirements() { ... }',
                            options: [],
                            examples: [
                                { code: 'check_requirements() {
  info "V√©rification des pr√©requis..."
  
  # V√©rifier les commandes n√©cessaires
  local required_cmds=(git docker rsync ssh)
  for cmd in "${required_cmds[@]}"; do
    command -v "$cmd" >/dev/null 2>&1 || die "$cmd n\'est pas install√©"
  done
  
  # V√©rifier les fichiers de config
  [ -f ".env" ] || die "Fichier .env manquant"
  [ -f "docker-compose.yml" ] || die "docker-compose.yml manquant"
  
  # V√©rifier les droits
  [ -w "$LOG_FILE" ] || touch "$LOG_FILE" 2>/dev/null || die "Impossible d\'√©crire dans $LOG_FILE"
  
  # V√©rifier la connexion r√©seau
  ping -c1 -W2 "$DEPLOY_HOST" >/dev/null 2>&1 || die "Serveur $DEPLOY_HOST inaccessible"
  
  info "Tous les pr√©requis sont satisfaits"
}', desc: 'V√©rifications compl√®tes' }
                            ],
                            tips: ['√âchouez t√¥t et clairement plut√¥t que tard avec des erreurs cryptiques'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 5: Logique m√©tier',
                        desc: 'Actions principales du script',
                        details: {
                            explanation: 'Impl√©menter les actions principales avec gestion des erreurs.',
                            syntax: 'deploy() { ... }
run_tests() { ... }',
                            options: [],
                            examples: [
                                { code: 'backup_current() {
  info "Sauvegarde de la version actuelle..."
  local backup_dir="/backup/$(date +%Y%m%d_%H%M%S)"
  
  if $DRY_RUN; then
    info "[DRY-RUN] mkdir -p $backup_dir"
    return 0
  fi
  
  ssh "$DEPLOY_HOST" "mkdir -p $backup_dir && cp -r $APP_DIR/* $backup_dir/" \n    || die "√âchec de la sauvegarde"
  
  info "Sauvegarde cr√©√©e: $backup_dir"
}

deploy() {
  info "D√©ploiement vers $TARGET_ENV..."
  
  # Build
  docker compose build --no-cache || die "√âchec du build"
  
  # Tests
  docker compose run --rm app pytest || die "Tests √©chou√©s"
  
  # Deploy
  rsync -avz --delete ./dist/ "$DEPLOY_HOST:$APP_DIR/" || die "√âchec rsync"
  
  # Restart
  ssh "$DEPLOY_HOST" "cd $APP_DIR && docker compose up -d" || die "√âchec restart"
  
  info "D√©ploiement termin√© avec succ√®s!"
}', desc: 'Actions principales' }
                            ],
                            tips: ['Impl√©mentez le mode dry-run pour tester sans risque'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 6: Nettoyage et rollback',
                        desc: 'Trap et gestion des erreurs',
                        details: {
                            explanation: 'Utiliser trap pour nettoyer et permettre le rollback en cas d\'√©chec.',
                            syntax: 'trap cleanup EXIT
trap rollback ERR',
                            options: [],
                            examples: [
                                { code: '# Variables pour le rollback
DEPLOYED=false
BACKUP_PATH=""

cleanup() {
  local exit_code=$?
  info "Nettoyage..."
  
  # Supprimer fichiers temporaires
  rm -rf "${TMPDIR:-/tmp}/deploy_$$"* 2>/dev/null
  
  if [ $exit_code -ne 0 ] && [ "$DEPLOYED" = true ]; then
    warn "√âchec d√©tect√© apr√®s d√©ploiement, rollback..."
    rollback
  fi
  
  exit $exit_code
}

rollback() {
  error "Rollback vers la version pr√©c√©dente..."
  if [ -n "$BACKUP_PATH" ]; then
    ssh "$DEPLOY_HOST" "rm -rf $APP_DIR/* && cp -r $BACKUP_PATH/* $APP_DIR/"
    ssh "$DEPLOY_HOST" "cd $APP_DIR && docker compose up -d"
    info "Rollback effectu√© depuis: $BACKUP_PATH"
  else
    error "Pas de backup disponible pour le rollback!"
  fi
}

trap cleanup EXIT', desc: 'Gestion de sortie' }
                            ],
                            tips: ['Trap EXIT est appel√© dans tous les cas, m√™me sur erreur'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 7: Point d\'entr√©e',
                        desc: 'Orchestration main()',
                        details: {
                            explanation: 'Fonction main qui orchestre l\'ex√©cution du script.',
                            syntax: 'main() { ... }
main "$@"',
                            options: [],
                            examples: [
                                { code: 'main() {
  info "=== D√©ploiement $TARGET_ENV ===" 
  info "Mode: $($DRY_RUN && echo "DRY-RUN" || echo "R√âEL")"
  
  # Confirmation en production
  if [ "$TARGET_ENV" = "production" ] && ! $DRY_RUN; then
    confirm "D√©ployer en PRODUCTION?" || die "Annul√© par l\'utilisateur"
  fi
  
  # √âtapes du d√©ploiement
  check_requirements
  
  backup_current
  BACKUP_PATH="$LAST_BACKUP"
  
  deploy
  DEPLOYED=true
  
  # V√©rification post-d√©ploiement
  sleep 5
  if ! curl -sf "https://$APP_URL/health" >/dev/null; then
    die "Health check √©chou√© apr√®s d√©ploiement"
  fi
  
  info "=== D√©ploiement r√©ussi! ==="
  info "URL: https://$APP_URL"
}

# Point d\'entr√©e
main "$@"', desc: 'Fonction main' }
                            ],
                            tips: ['main "$@" passe tous les arguments √† la fonction main'],
                            warnings: []
                        }
                    }
                ]
            }
        ];
    </script>
    <script src="../js/cheatsheet.js"></script>
</body>
</html>
