<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Aide-m√©moire Django : gestion de projet, migrations, mod√®les et commandes manage.py.">
    <title>Django Framework - IT Cheatsheets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="dark-theme text-slate-200">

    <header class="bg-slate-900/50 border-b border-white/5 py-8 px-4 relative overflow-hidden header-glow">
        <div class="max-w-4xl mx-auto relative z-10">
            <div class="flex items-center justify-between mb-4">
                <a href="../index.html" class="nav-back inline-flex items-center text-slate-400 hover:text-sky-400 transition">
                    <i class="fas fa-arrow-left mr-2"></i>Retour
                </a>
                <a href="../index.html" class="inline-flex items-center text-slate-400 hover:text-sky-400 transition">
                    <i class="fas fa-home mr-2"></i>Accueil
                </a>
            </div>
            <div class="text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-xl bg-emerald-500/20 mb-4 icon-glow">
                    <i class="fab fa-python text-3xl text-emerald-400"></i>
                </div>
                <h1 class="text-3xl font-bold mb-2 gradient-text">Django Framework</h1>
                <p class="text-slate-400">Gestion de projet : startproject, migrations, runserver et shell</p>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 relative z-10">
        <div class="mb-8 relative">
            <input type="text" id="searchInput" placeholder="Rechercher une commande..."
                   class="search-dark w-full p-4 pl-12 rounded-lg outline-none transition">
            <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500"></i>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="categoriesGrid"></div>
    </main>

    <div id="detailModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50 p-4 modal-overlay" onclick="closeModal(event)">
        <div class="modal-content-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl modal-content" onclick="event.stopPropagation()">
            <div id="modalContent"></div>
        </div>
    </div>

    <footer class="border-t border-white/5 text-center text-slate-500 py-8 text-sm relative z-10">
        <p>¬© 2026 - Dr FENOHASINA Toto Jean Felicien</p>
    </footer>

    <script>
        const cheatsheetData = [
            {
                id: 'project',
                title: 'Gestion de projet',
                icon: 'fa-folder-plus',
                color: 'border-l-4 border-emerald-500',
                commands: [
                    {
                        cmd: 'django-admin startproject nom_projet',
                        desc: 'Cr√©er un nouveau projet Django',
                        details: {
                            explanation: 'Cr√©e la structure de base d\'un projet Django avec les fichiers de configuration (settings.py, urls.py, etc.).',
                            syntax: 'django-admin startproject nom_projet [directory]',
                            options: [],
                            examples: [
                                { code: 'django-admin startproject monsite', desc: 'Cr√©e le dossier monsite/' },
                                { code: 'django-admin startproject config .', desc: 'Cr√©e dans le dossier courant (config/)' }
                            ],
                            tips: ['Utilisez "config" comme nom si vous cr√©ez dans le dossier courant'],
                            warnings: ['Le nom ne doit pas √™tre un mot r√©serv√© Python (test, django, etc.)']
                        }
                    },
                    {
                        cmd: 'python manage.py startapp nom_app',
                        desc: 'Cr√©er une nouvelle application',
                        details: {
                            explanation: 'Cr√©e une application Django (models, views, etc.) au sein du projet.',
                            syntax: 'python manage.py startapp nom_app',
                            options: [],
                            examples: [
                                { code: 'python manage.py startapp blog', desc: 'Cr√©e l\'app blog/' },
                                { code: 'python manage.py startapp accounts', desc: 'App pour l\'authentification' }
                            ],
                            tips: ['N\'oubliez pas d\'ajouter l\'app dans INSTALLED_APPS de settings.py'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'python manage.py runserver',
                        desc: 'Lancer le serveur de d√©veloppement',
                        details: {
                            explanation: 'D√©marre le serveur web de d√©veloppement Django sur localhost:8000.',
                            syntax: 'python manage.py runserver [adresse:port]',
                            options: [
                                { flag: '8080', desc: 'Utiliser un port diff√©rent' },
                                { flag: '0.0.0.0:8000', desc: '√âcouter sur toutes les interfaces' }
                            ],
                            examples: [
                                { code: 'python manage.py runserver', desc: 'Serveur sur 127.0.0.1:8000' },
                                { code: 'python manage.py runserver 0.0.0.0:8080', desc: 'Accessible en r√©seau, port 8080' }
                            ],
                            tips: ['Le serveur red√©marre automatiquement √† chaque modification'],
                            warnings: ['Ne pas utiliser en production !']
                        }
                    }
                ]
            },
            {
                id: 'database',
                title: 'Base de donn√©es',
                icon: 'fa-database',
                color: 'border-l-4 border-blue-500',
                commands: [
                    {
                        cmd: 'python manage.py makemigrations',
                        desc: 'Cr√©er les fichiers de migration',
                        details: {
                            explanation: 'Analyse les changements dans les mod√®les et cr√©e les fichiers de migration correspondants.',
                            syntax: 'python manage.py makemigrations [app_name]',
                            options: [
                                { flag: '--name', desc: 'Nom personnalis√© pour la migration' },
                                { flag: '--empty', desc: 'Cr√©er une migration vide' }
                            ],
                            examples: [
                                { code: 'python manage.py makemigrations', desc: 'Migrations pour toutes les apps' },
                                { code: 'python manage.py makemigrations blog', desc: 'Migrations pour l\'app blog seulement' }
                            ],
                            tips: ['V√©rifiez toujours le contenu des migrations g√©n√©r√©es'],
                            warnings: ['Ne modifiez pas les migrations apr√®s les avoir appliqu√©es en production']
                        }
                    },
                    {
                        cmd: 'python manage.py migrate',
                        desc: 'Appliquer les migrations',
                        details: {
                            explanation: 'Ex√©cute les migrations en attente pour mettre √† jour la structure de la base de donn√©es.',
                            syntax: 'python manage.py migrate [app_name] [migration_name]',
                            options: [
                                { flag: '--fake', desc: 'Marquer comme appliqu√© sans ex√©cuter' },
                                { flag: '--plan', desc: 'Afficher le plan sans ex√©cuter' }
                            ],
                            examples: [
                                { code: 'python manage.py migrate', desc: 'Appliquer toutes les migrations' },
                                { code: 'python manage.py migrate blog 0001', desc: 'Migrer vers une version sp√©cifique' },
                                { code: 'python manage.py migrate blog zero', desc: 'Annuler toutes les migrations de blog' }
                            ],
                            tips: ['Faites un backup avant de migrer en production'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'python manage.py shell',
                        desc: 'Ouvrir le shell Django',
                        details: {
                            explanation: 'Lance un interpr√©teur Python avec l\'environnement Django charg√©.',
                            syntax: 'python manage.py shell',
                            options: [
                                { flag: '-i ipython', desc: 'Utiliser IPython si disponible' }
                            ],
                            examples: [
                                { code: 'python manage.py shell', desc: 'Shell basique' },
                                { code: '>>> from blog.models import Article', desc: 'Dans le shell: importer un mod√®le' },
                                { code: '>>> Article.objects.all()', desc: 'Requ√™te sur les articles' }
                            ],
                            tips: ['Id√©al pour tester des requ√™tes ORM rapidement'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'admin',
                title: 'Administration',
                icon: 'fa-user-shield',
                color: 'border-l-4 border-purple-500',
                commands: [
                    {
                        cmd: 'python manage.py createsuperuser',
                        desc: 'Cr√©er un super-utilisateur',
                        details: {
                            explanation: 'Cr√©e un compte administrateur avec tous les droits pour acc√©der √† /admin/.',
                            syntax: 'python manage.py createsuperuser',
                            options: [
                                { flag: '--username', desc: 'Nom d\'utilisateur' },
                                { flag: '--email', desc: 'Adresse email' }
                            ],
                            examples: [
                                { code: 'python manage.py createsuperuser', desc: 'Mode interactif' },
                                { code: 'python manage.py createsuperuser --username admin --email admin@test.com', desc: 'Avec options' }
                            ],
                            tips: ['Utilisez un mot de passe fort m√™me en d√©veloppement'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'python manage.py collectstatic',
                        desc: 'Collecter les fichiers statiques',
                        details: {
                            explanation: 'Copie tous les fichiers statiques dans STATIC_ROOT pour le d√©ploiement.',
                            syntax: 'python manage.py collectstatic',
                            options: [
                                { flag: '--noinput', desc: 'Ne pas demander de confirmation' },
                                { flag: '--clear', desc: 'Vider le dossier avant de copier' }
                            ],
                            examples: [
                                { code: 'python manage.py collectstatic', desc: 'Collecter les statiques' },
                                { code: 'python manage.py collectstatic --noinput', desc: 'Sans confirmation (CI/CD)' }
                            ],
                            tips: ['N√©cessaire avant le d√©ploiement en production'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'testing',
                title: 'Tests & Debug',
                icon: 'fa-bug',
                color: 'border-l-4 border-red-500',
                commands: [
                    {
                        cmd: 'python manage.py test',
                        desc: 'Lancer les tests',
                        details: {
                            explanation: 'Ex√©cute les tests unitaires Django d√©finis dans les fichiers tests.py.',
                            syntax: 'python manage.py test [app_name]',
                            options: [
                                { flag: '-v 2', desc: 'Mode verbeux' },
                                { flag: '--keepdb', desc: 'R√©utiliser la base de test' }
                            ],
                            examples: [
                                { code: 'python manage.py test', desc: 'Tous les tests' },
                                { code: 'python manage.py test blog.tests.ArticleTests', desc: 'Classe de test sp√©cifique' }
                            ],
                            tips: ['Utilisez --keepdb pour acc√©l√©rer les tests r√©p√©t√©s'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'python manage.py check',
                        desc: 'V√©rifier le projet',
                        details: {
                            explanation: 'V√©rifie la configuration du projet pour d√©tecter les probl√®mes courants.',
                            syntax: 'python manage.py check [--deploy]',
                            options: [
                                { flag: '--deploy', desc: 'V√©rifications suppl√©mentaires pour la production' }
                            ],
                            examples: [
                                { code: 'python manage.py check', desc: 'V√©rification basique' },
                                { code: 'python manage.py check --deploy', desc: 'V√©rification de d√©ploiement' }
                            ],
                            tips: ['Lancez check --deploy avant de d√©ployer'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'models-advanced',
                title: 'Mod√®les avanc√©s',
                icon: 'fa-layer-group',
                color: 'border-l-4 border-cyan-500',
                commands: [
                    {
                        cmd: 'ForeignKey / OneToOneField / ManyToManyField',
                        desc: 'Relations entre mod√®les',
                        details: {
                            explanation: 'Django propose trois types de relations : ForeignKey (N-1), OneToOneField (1-1), et ManyToManyField (N-N).',
                            syntax: 'field = models.ForeignKey(Model, on_delete=..., related_name="...")',
                            options: [
                                { flag: 'on_delete=CASCADE', desc: 'Supprimer les objets li√©s' },
                                { flag: 'on_delete=PROTECT', desc: 'Emp√™cher la suppression' },
                                { flag: 'on_delete=SET_NULL', desc: 'Mettre √† NULL (null=True requis)' },
                                { flag: 'related_name', desc: 'Nom de la relation inverse' }
                            ],
                            examples: [
                                { code: 'author = models.ForeignKey(User, on_delete=models.CASCADE, related_name="articles")', desc: 'Relation article ‚Üí auteur' },
                                { code: 'profile = models.OneToOneField(User, on_delete=models.CASCADE)', desc: 'Profil unique par user' },
                                { code: 'tags = models.ManyToManyField(Tag, blank=True)', desc: 'Tags multiples' }
                            ],
                            tips: ['Utilisez related_name pour acc√©der aux objets li√©s : user.articles.all()'],
                            warnings: ['Choisissez on_delete avec soin pour √©viter les suppressions en cascade non voulues']
                        }
                    },
                    {
                        cmd: 'Model.objects.filter() / exclude() / annotate()',
                        desc: 'QuerySet avanc√©',
                        details: {
                            explanation: 'Les QuerySets permettent de cha√Æner des filtres et d\'agr√©ger des donn√©es de fa√ßon lazy.',
                            syntax: 'Model.objects.filter(**kwargs).exclude(**kwargs).annotate(...)',
                            options: [
                                { flag: '__exact / __iexact', desc: '√âgalit√© exacte (case insensitive)' },
                                { flag: '__contains / __icontains', desc: 'Contient (case insensitive)' },
                                { flag: '__gt / __gte / __lt / __lte', desc: 'Comparaisons num√©riques' },
                                { flag: '__in', desc: 'Dans une liste de valeurs' }
                            ],
                            examples: [
                                { code: 'Article.objects.filter(status="published", author__username="john")', desc: 'Filtre avec relation' },
                                { code: 'Article.objects.exclude(draft=True).order_by("-created")', desc: 'Exclure et trier' },
                                { code: 'Author.objects.annotate(article_count=Count("articles"))', desc: 'Compter les articles par auteur' }
                            ],
                            tips: ['Les QuerySets sont lazy : la requ√™te ne s\'ex√©cute qu\'√† l\'√©valuation'],
                            warnings: ['√âvitez les requ√™tes N+1 : utilisez select_related() et prefetch_related()']
                        }
                    },
                    {
                        cmd: 'select_related() / prefetch_related()',
                        desc: 'Optimiser les requ√™tes',
                        details: {
                            explanation: '√âvite les requ√™tes N+1 en chargeant les relations en une seule requ√™te SQL.',
                            syntax: 'Model.objects.select_related("fk_field").prefetch_related("m2m_field")',
                            options: [
                                { flag: 'select_related', desc: 'JOIN SQL pour ForeignKey/OneToOne' },
                                { flag: 'prefetch_related', desc: 'Requ√™te s√©par√©e pour ManyToMany' }
                            ],
                            examples: [
                                { code: 'Article.objects.select_related("author", "category")', desc: 'Charger auteur et cat√©gorie en JOIN' },
                                { code: 'Article.objects.prefetch_related("tags")', desc: 'Pr√©charger les tags M2M' },
                                { code: 'Article.objects.select_related("author").prefetch_related("comments__user")', desc: 'Combinaison' }
                            ],
                            tips: ['Utilisez django-debug-toolbar pour visualiser les requ√™tes SQL'],
                            warnings: ['select_related ne fonctionne pas avec ManyToMany']
                        }
                    },
                    {
                        cmd: 'class Meta / Manager personnalis√©',
                        desc: 'Configuration du mod√®le',
                        details: {
                            explanation: 'La classe Meta configure le comportement du mod√®le. Un Manager personnalis√© ajoute des m√©thodes de requ√™te r√©utilisables.',
                            syntax: 'class Meta: / class CustomManager(models.Manager):',
                            options: [
                                { flag: 'ordering', desc: 'Ordre par d√©faut des r√©sultats' },
                                { flag: 'verbose_name', desc: 'Nom affich√© dans l\'admin' },
                                { flag: 'unique_together', desc: 'Contrainte d\'unicit√© multi-champs' },
                                { flag: 'indexes', desc: 'Index de base de donn√©es' }
                            ],
                            examples: [
                                { code: 'class Meta:\\n    ordering = ["-created"]\\n    verbose_name = "Article"', desc: 'Configuration Meta' },
                                { code: 'class PublishedManager(models.Manager):\\n    def get_queryset(self):\\n        return super().get_queryset().filter(status="published")', desc: 'Manager pour articles publi√©s' },
                                { code: 'published = PublishedManager()  # Article.published.all()', desc: 'Utilisation du manager' }
                            ],
                            tips: ['Gardez objects comme manager par d√©faut et ajoutez des managers sp√©cialis√©s'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'templates',
                title: 'Templates',
                icon: 'fa-file-code',
                color: 'border-l-4 border-yellow-500',
                commands: [
                    {
                        cmd: '{{ variable }} / {% tag %}',
                        desc: 'Syntaxe de base des templates',
                        details: {
                            explanation: 'Django utilise {{ }} pour afficher des variables et {% %} pour la logique (tags).',
                            syntax: '{{ variable }} / {% tag %} ... {% endtag %}',
                            options: [
                                { flag: '{{ var }}', desc: 'Afficher une variable' },
                                { flag: '{{ var|filter }}', desc: 'Appliquer un filtre' },
                                { flag: '{% tag %}', desc: 'Tag de template' },
                                { flag: '{# comment #}', desc: 'Commentaire' }
                            ],
                            examples: [
                                { code: '{{ article.title }}', desc: 'Afficher le titre' },
                                { code: '{{ article.content|truncatewords:50 }}', desc: 'Tronquer √† 50 mots' },
                                { code: '{% if user.is_authenticated %}Bonjour {{ user.username }}{% endif %}', desc: 'Condition' }
                            ],
                            tips: ['Les variables sont automatiquement √©chapp√©es (s√©curit√© XSS)'],
                            warnings: ['Utilisez {{ var|safe }} avec pr√©caution pour le HTML non √©chapp√©']
                        }
                    },
                    {
                        cmd: '{% for %} / {% if %} / {% with %}',
                        desc: 'Tags de contr√¥le',
                        details: {
                            explanation: 'Tags pour les boucles, conditions et assignation de variables temporaires.',
                            syntax: '{% for item in list %} ... {% endfor %}',
                            options: [
                                { flag: 'forloop.counter', desc: 'Index √† partir de 1' },
                                { flag: 'forloop.first/last', desc: 'Premier/dernier √©l√©ment' },
                                { flag: '{% empty %}', desc: 'Bloc si liste vide' }
                            ],
                            examples: [
                                { code: '{% for article in articles %}\\n  <h2>{{ article.title }}</h2>\\n{% empty %}\\n  <p>Aucun article</p>\\n{% endfor %}', desc: 'Boucle avec fallback' },
                                { code: '{% if article.is_published and article.author == user %}\\n  <a href="{% url \\'edit\\' article.pk %}">Modifier</a>\\n{% endif %}', desc: 'Condition complexe' },
                                { code: '{% with total=articles.count %}{{ total }} article{{ total|pluralize }}{% endwith %}', desc: 'Variable temporaire' }
                            ],
                            tips: ['Utilisez {% empty %} plut√¥t qu\'un {% if %} s√©par√© pour les listes vides'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '{% extends %} / {% block %} / {% include %}',
                        desc: 'H√©ritage de templates',
                        details: {
                            explanation: 'Syst√®me d\'h√©ritage pour √©viter la duplication : un template de base avec des blocs rempla√ßables.',
                            syntax: '{% extends "base.html" %} {% block name %}...{% endblock %}',
                            options: [
                                { flag: '{% extends %}', desc: 'H√©riter d\'un template parent' },
                                { flag: '{% block %}', desc: 'D√©finir un bloc rempla√ßable' },
                                { flag: '{{ block.super }}', desc: 'Contenu du bloc parent' },
                                { flag: '{% include %}', desc: 'Inclure un template partiel' }
                            ],
                            examples: [
                                { code: '<!-- base.html -->\\n<!DOCTYPE html>\\n<html>\\n<body>{% block content %}{% endblock %}</body>\\n</html>', desc: 'Template de base' },
                                { code: '{% extends "base.html" %}\\n{% block content %}\\n  <h1>{{ article.title }}</h1>\\n{% endblock %}', desc: 'Template enfant' },
                                { code: '{% include "partials/_card.html" with article=item %}', desc: 'Inclure avec contexte' }
                            ],
                            tips: ['Structurez vos templates : base.html ‚Üí layout/*.html ‚Üí pages/*.html'],
                            warnings: ['{% include %} peut impacter les performances si surutilis√©']
                        }
                    },
                    {
                        cmd: '{% url %} / {% static %} / {% csrf_token %}',
                        desc: 'Tags utilitaires',
                        details: {
                            explanation: 'Tags essentiels pour les URLs, fichiers statiques et la protection CSRF.',
                            syntax: '{% url "name" args %} / {% static "path" %}',
                            options: [
                                { flag: '{% url %}', desc: 'G√©n√©rer une URL depuis son nom' },
                                { flag: '{% static %}', desc: 'URL vers un fichier statique' },
                                { flag: '{% csrf_token %}', desc: 'Token CSRF pour les formulaires' }
                            ],
                            examples: [
                                { code: '<a href="{% url \\'article_detail\\' article.pk %}">Lire</a>', desc: 'URL avec argument' },
                                { code: '<link rel="stylesheet" href="{% static \\'css/style.css\\' %}">', desc: 'Fichier CSS statique' },
                                { code: '<form method="post">\\n  {% csrf_token %}\\n  {{ form.as_p }}\\n  <button type="submit">Envoyer</button>\\n</form>', desc: 'Formulaire s√©curis√©' }
                            ],
                            tips: ['{% load static %} est requis en haut du template pour utiliser {% static %}'],
                            warnings: ['Oubliez jamais {% csrf_token %} dans les formulaires POST']
                        }
                    }
                ]
            },
            {
                id: 'forms',
                title: 'Formulaires',
                icon: 'fa-edit',
                color: 'border-l-4 border-pink-500',
                commands: [
                    {
                        cmd: 'class MyForm(forms.Form / forms.ModelForm)',
                        desc: 'Cr√©er un formulaire',
                        details: {
                            explanation: 'Django Forms g√®re la validation et le rendu HTML. ModelForm g√©n√®re automatiquement les champs depuis un mod√®le.',
                            syntax: 'class MyForm(forms.Form): / class MyForm(forms.ModelForm):',
                            options: [
                                { flag: 'forms.CharField', desc: 'Champ texte' },
                                { flag: 'forms.EmailField', desc: 'Email valid√©' },
                                { flag: 'forms.ChoiceField', desc: 'Liste d√©roulante' },
                                { flag: 'forms.FileField', desc: 'Upload de fichier' }
                            ],
                            examples: [
                                { code: 'class ContactForm(forms.Form):\\n    email = forms.EmailField()\\n    message = forms.CharField(widget=forms.Textarea)', desc: 'Form simple' },
                                { code: 'class ArticleForm(forms.ModelForm):\\n    class Meta:\\n        model = Article\\n        fields = ["title", "content", "category"]', desc: 'ModelForm' },
                                { code: 'class ArticleForm(forms.ModelForm):\\n    class Meta:\\n        model = Article\\n        exclude = ["author", "created"]', desc: 'Exclure des champs' }
                            ],
                            tips: ['Pr√©f√©rez ModelForm pour les formulaires li√©s √† un mod√®le'],
                            warnings: ['Listez explicitement les fields pour √©viter d\'exposer des champs sensibles']
                        }
                    },
                    {
                        cmd: 'form.is_valid() / form.cleaned_data / form.save()',
                        desc: 'Valider et sauvegarder',
                        details: {
                            explanation: 'is_valid() d√©clenche la validation. cleaned_data contient les donn√©es nettoy√©es. save() persiste un ModelForm.',
                            syntax: 'if form.is_valid(): data = form.cleaned_data',
                            options: [
                                { flag: 'is_valid()', desc: 'Retourne True si valide' },
                                { flag: 'cleaned_data', desc: 'Dict des donn√©es valid√©es' },
                                { flag: 'errors', desc: 'Dict des erreurs par champ' },
                                { flag: 'save(commit=False)', desc: 'Cr√©er l\'objet sans sauvegarder' }
                            ],
                            examples: [
                                { code: 'def contact_view(request):\\n    if request.method == "POST":\\n        form = ContactForm(request.POST)\\n        if form.is_valid():\\n            send_email(form.cleaned_data["email"], form.cleaned_data["message"])\\n            return redirect("success")\\n    else:\\n        form = ContactForm()\\n    return render(request, "contact.html", {"form": form})', desc: 'Pattern complet' },
                                { code: 'article = form.save(commit=False)\\narticle.author = request.user\\narticle.save()', desc: 'Ajouter l\'auteur avant save' }
                            ],
                            tips: ['Utilisez commit=False pour modifier l\'objet avant sauvegarde'],
                            warnings: ['N\'oubliez pas form.save_m2m() apr√®s commit=False si vous avez des ManyToMany']
                        }
                    },
                    {
                        cmd: 'def clean_field() / def clean()',
                        desc: 'Validation personnalis√©e',
                        details: {
                            explanation: 'clean_<field>() valide un champ sp√©cifique. clean() valide le formulaire entier (validation crois√©e).',
                            syntax: 'def clean_field(self): / def clean(self):',
                            options: [
                                { flag: 'clean_<field>()', desc: 'Validation d\'un champ' },
                                { flag: 'clean()', desc: 'Validation globale' },
                                { flag: 'ValidationError', desc: 'Lever une erreur de validation' }
                            ],
                            examples: [
                                { code: 'def clean_email(self):\\n    email = self.cleaned_data["email"]\\n    if not email.endswith("@company.com"):\\n        raise forms.ValidationError("Email entreprise requis")\\n    return email', desc: 'Valider l\'email' },
                                { code: 'def clean(self):\\n    cleaned_data = super().clean()\\n    start = cleaned_data.get("start_date")\\n    end = cleaned_data.get("end_date")\\n    if start and end and start > end:\\n        raise forms.ValidationError("La date de fin doit √™tre apr√®s le d√©but")\\n    return cleaned_data', desc: 'Validation crois√©e' }
                            ],
                            tips: ['Retournez toujours la valeur nettoy√©e dans clean_<field>()'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'widget= / attrs={}',
                        desc: 'Personnaliser le rendu',
                        details: {
                            explanation: 'Les widgets contr√¥lent le rendu HTML des champs. attrs ajoute des attributs HTML.',
                            syntax: 'forms.CharField(widget=forms.Textarea(attrs={...}))',
                            options: [
                                { flag: 'forms.TextInput', desc: 'Input text' },
                                { flag: 'forms.Textarea', desc: 'Zone de texte' },
                                { flag: 'forms.Select', desc: 'Liste d√©roulante' },
                                { flag: 'forms.CheckboxInput', desc: 'Case √† cocher' }
                            ],
                            examples: [
                                { code: 'message = forms.CharField(\\n    widget=forms.Textarea(attrs={\\n        "class": "form-control",\\n        "rows": 5,\\n        "placeholder": "Votre message..."\\n    })\\n)', desc: 'Textarea avec classes CSS' },
                                { code: 'class Meta:\\n    widgets = {\\n        "content": forms.Textarea(attrs={"class": "editor"}),\\n        "published_date": forms.DateInput(attrs={"type": "date"})\\n    }', desc: 'Widgets dans ModelForm' }
                            ],
                            tips: ['Utilisez django-crispy-forms pour un rendu Bootstrap/Tailwind automatique'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'middleware-signals',
                title: 'Middleware & Signals',
                icon: 'fa-plug',
                color: 'border-l-4 border-orange-500',
                commands: [
                    {
                        cmd: 'class CustomMiddleware',
                        desc: 'Cr√©er un middleware',
                        details: {
                            explanation: 'Un middleware intercepte chaque requ√™te/r√©ponse. Utilis√© pour l\'authentification, le logging, la modification des headers, etc.',
                            syntax: 'class CustomMiddleware: def __init__(self, get_response): ...',
                            options: [
                                { flag: '__init__', desc: 'Configuration initiale (une fois)' },
                                { flag: '__call__', desc: 'Ex√©cut√© √† chaque requ√™te' },
                                { flag: 'process_view', desc: 'Avant l\'ex√©cution de la vue' },
                                { flag: 'process_exception', desc: 'En cas d\'exception' }
                            ],
                            examples: [
                                { code: 'class TimingMiddleware:\\n    def __init__(self, get_response):\\n        self.get_response = get_response\\n\\n    def __call__(self, request):\\n        import time\\n        start = time.time()\\n        response = self.get_response(request)\\n        duration = time.time() - start\\n        response["X-Request-Duration"] = str(duration)\\n        return response', desc: 'Mesurer le temps de r√©ponse' },
                                { code: '# settings.py\\nMIDDLEWARE = [\\n    ...\\n    "myapp.middleware.TimingMiddleware",\\n]', desc: 'Enregistrer le middleware' }
                            ],
                            tips: ['L\'ordre des middlewares compte : ils s\'ex√©cutent de haut en bas (requ√™te) puis de bas en haut (r√©ponse)'],
                            warnings: ['Un middleware lent impacte TOUTES les requ√™tes']
                        }
                    },
                    {
                        cmd: '@receiver(signal) / signal.connect()',
                        desc: '√âcouter des signaux',
                        details: {
                            explanation: 'Les signaux permettent de d√©coupler le code en r√©agissant √† des √©v√©nements (save, delete, login...).',
                            syntax: '@receiver(post_save, sender=Model)',
                            options: [
                                { flag: 'pre_save / post_save', desc: 'Avant/apr√®s sauvegarde' },
                                { flag: 'pre_delete / post_delete', desc: 'Avant/apr√®s suppression' },
                                { flag: 'm2m_changed', desc: 'Changement ManyToMany' },
                                { flag: 'user_logged_in/out', desc: 'Connexion/d√©connexion' }
                            ],
                            examples: [
                                { code: 'from django.db.models.signals import post_save\\nfrom django.dispatch import receiver\\n\\n@receiver(post_save, sender=User)\\ndef create_profile(sender, instance, created, **kwargs):\\n    if created:\\n        Profile.objects.create(user=instance)', desc: 'Cr√©er un profil automatiquement' },
                                { code: '@receiver(post_delete, sender=Article)\\ndef delete_image(sender, instance, **kwargs):\\n    if instance.image:\\n        instance.image.delete(save=False)', desc: 'Supprimer l\'image associ√©e' }
                            ],
                            tips: ['Placez les receivers dans un fichier signals.py et importez-le dans apps.py ready()'],
                            warnings: ['√âvitez la logique m√©tier complexe dans les signaux : difficile √† d√©bugger']
                        }
                    },
                    {
                        cmd: 'apps.py ready() / dispatch_uid',
                        desc: 'Configuration des signaux',
                        details: {
                            explanation: 'Les signaux doivent √™tre enregistr√©s au d√©marrage. La m√©thode ready() de AppConfig est l\'endroit id√©al.',
                            syntax: 'def ready(self): import myapp.signals',
                            options: [
                                { flag: 'dispatch_uid', desc: 'ID unique pour √©viter les doublons' }
                            ],
                            examples: [
                                { code: '# myapp/apps.py\\nclass MyappConfig(AppConfig):\\n    name = "myapp"\\n\\n    def ready(self):\\n        import myapp.signals  # noqa', desc: 'Charger les signaux' },
                                { code: '@receiver(post_save, sender=User, dispatch_uid="create_profile_once")\\ndef create_profile(sender, instance, created, **kwargs):\\n    ...', desc: '√âviter les doublons' }
                            ],
                            tips: ['Le dispatch_uid √©vite que le signal soit enregistr√© plusieurs fois en dev (auto-reload)'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'views-advanced',
                title: 'Vues avanc√©es',
                icon: 'fa-eye',
                color: 'border-l-4 border-indigo-500',
                commands: [
                    {
                        cmd: 'class MyView(View / TemplateView / ListView)',
                        desc: 'Class-Based Views (CBV)',
                        details: {
                            explanation: 'Les CBV utilisent l\'h√©ritage pour r√©utiliser la logique. Django fournit des vues g√©n√©riques pour les cas courants.',
                            syntax: 'class MyView(ListView): model = Article',
                            options: [
                                { flag: 'View', desc: 'Vue de base (get, post...)' },
                                { flag: 'TemplateView', desc: 'Rendu de template simple' },
                                { flag: 'ListView', desc: 'Liste d\'objets' },
                                { flag: 'DetailView', desc: 'D√©tail d\'un objet' },
                                { flag: 'CreateView / UpdateView', desc: 'Formulaire cr√©ation/√©dition' },
                                { flag: 'DeleteView', desc: 'Suppression avec confirmation' }
                            ],
                            examples: [
                                { code: 'class ArticleListView(ListView):\\n    model = Article\\n    template_name = "blog/article_list.html"\\n    context_object_name = "articles"\\n    paginate_by = 10', desc: 'Liste pagin√©e' },
                                { code: 'class ArticleDetailView(DetailView):\\n    model = Article\\n    slug_field = "slug"\\n    slug_url_kwarg = "article_slug"', desc: 'D√©tail par slug' },
                                { code: 'class ArticleCreateView(LoginRequiredMixin, CreateView):\\n    model = Article\\n    fields = ["title", "content"]\\n    success_url = reverse_lazy("article_list")\\n\\n    def form_valid(self, form):\\n        form.instance.author = self.request.user\\n        return super().form_valid(form)', desc: 'Cr√©ation avec auteur' }
                            ],
                            tips: ['Utilisez les mixins comme LoginRequiredMixin pour les permissions'],
                            warnings: ['Les CBV peuvent √™tre complexes : pr√©f√©rez les FBV pour la logique simple']
                        }
                    },
                    {
                        cmd: 'get_queryset() / get_context_data()',
                        desc: 'Personnaliser les CBV',
                        details: {
                            explanation: 'Surcharger ces m√©thodes permet de filtrer les donn√©es et d\'ajouter du contexte au template.',
                            syntax: 'def get_queryset(self): / def get_context_data(self, **kwargs):',
                            options: [
                                { flag: 'get_queryset()', desc: 'Filtrer les objets affich√©s' },
                                { flag: 'get_context_data()', desc: 'Ajouter des variables au contexte' },
                                { flag: 'get_object()', desc: 'R√©cup√©rer l\'objet (DetailView)' }
                            ],
                            examples: [
                                { code: 'def get_queryset(self):\\n    return Article.objects.filter(\\n        status="published"\\n    ).select_related("author")', desc: 'Filtrer et optimiser' },
                                { code: 'def get_context_data(self, **kwargs):\\n    context = super().get_context_data(**kwargs)\\n    context["categories"] = Category.objects.all()\\n    context["popular"] = Article.objects.order_by("-views")[:5]\\n    return context', desc: 'Ajouter du contexte' }
                            ],
                            tips: ['Toujours appeler super() pour conserver le comportement par d√©faut'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '@login_required / @permission_required',
                        desc: 'D√©corateurs de permissions',
                        details: {
                            explanation: 'Prot√©gez vos vues avec des d√©corateurs qui v√©rifient l\'authentification et les permissions.',
                            syntax: '@login_required(login_url="...") / @permission_required("app.permission")',
                            options: [
                                { flag: '@login_required', desc: 'Utilisateur connect√© requis' },
                                { flag: '@permission_required', desc: 'Permission sp√©cifique requise' },
                                { flag: '@user_passes_test', desc: 'Test personnalis√©' }
                            ],
                            examples: [
                                { code: '@login_required\\ndef profile_view(request):\\n    return render(request, "profile.html")', desc: 'Vue prot√©g√©e (FBV)' },
                                { code: '@permission_required("blog.change_article", raise_exception=True)\\ndef edit_article(request, pk):\\n    ...', desc: 'Permission requise' },
                                { code: '@user_passes_test(lambda u: u.is_staff)\\ndef admin_dashboard(request):\\n    ...', desc: 'Test personnalis√©' }
                            ],
                            tips: ['Pour les CBV, utilisez LoginRequiredMixin comme premier parent'],
                            warnings: ['raise_exception=True renvoie 403, sinon redirige vers login']
                        }
                    }
                ]
            },
            {
                id: 'project-blog',
                title: 'üöÄ Projet: Blog Django',
                icon: 'fa-rocket',
                color: 'border-l-4 border-gradient-to-r from-emerald-500 to-cyan-500',
                commands: [
                    {
                        cmd: '√âtape 1: Initialisation du projet',
                        desc: 'Structure et configuration',
                        details: {
                            explanation: 'Cr√©er la structure du projet avec une application blog et configurer les settings.',
                            syntax: 'django-admin startproject config . && python manage.py startapp blog',
                            options: [],
                            examples: [
                                { code: '# Cr√©er le projet\\ndjango-admin startproject config .\\npython manage.py startapp blog\\n\\n# config/settings.py\\nINSTALLED_APPS = [\\n    ...\\n    "blog.apps.BlogConfig",\\n]\\n\\n# Configurer les templates\\nTEMPLATES = [{\\n    "DIRS": [BASE_DIR / "templates"],\\n    ...\\n}]\\n\\n# Fichiers statiques\\nSTATIC_URL = "/static/"\\nSTATICFILES_DIRS = [BASE_DIR / "static"]\\nMEDIA_URL = "/media/"\\nMEDIA_ROOT = BASE_DIR / "media"', desc: 'Configuration initiale' }
                            ],
                            tips: ['Cr√©ez les dossiers templates/ et static/ √† la racine du projet'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 2: Mod√®les de donn√©es',
                        desc: 'Article, Cat√©gorie, Commentaire',
                        details: {
                            explanation: 'D√©finir les mod√®les avec leurs relations et managers personnalis√©s.',
                            syntax: 'class Article(models.Model):',
                            options: [],
                            examples: [
                                { code: '# blog/models.py\\nfrom django.db import models\\nfrom django.contrib.auth.models import User\\nfrom django.urls import reverse\\n\\nclass Category(models.Model):\\n    name = models.CharField(max_length=100)\\n    slug = models.SlugField(unique=True)\\n\\n    def __str__(self):\\n        return self.name\\n\\nclass PublishedManager(models.Manager):\\n    def get_queryset(self):\\n        return super().get_queryset().filter(status="published")\\n\\nclass Article(models.Model):\\n    STATUS_CHOICES = [(\"draft\", \"Brouillon\"), (\"published\", \"Publi√©\")]\\n    \\n    title = models.CharField(max_length=200)\\n    slug = models.SlugField(unique=True)\\n    author = models.ForeignKey(User, on_delete=models.CASCADE, related_name="articles")\\n    category = models.ForeignKey(Category, on_delete=models.SET_NULL, null=True)\\n    content = models.TextField()\\n    image = models.ImageField(upload_to="articles/", blank=True)\\n    status = models.CharField(max_length=10, choices=STATUS_CHOICES, default="draft")\\n    created = models.DateTimeField(auto_now_add=True)\\n    updated = models.DateTimeField(auto_now=True)\\n\\n    objects = models.Manager()\\n    published = PublishedManager()\\n\\n    class Meta:\\n        ordering = [\"-created\"]\\n\\n    def get_absolute_url(self):\\n        return reverse("article_detail", kwargs={"slug": self.slug})\\n\\nclass Comment(models.Model):\\n    article = models.ForeignKey(Article, on_delete=models.CASCADE, related_name="comments")\\n    author = models.ForeignKey(User, on_delete=models.CASCADE)\\n    content = models.TextField()\\n    created = models.DateTimeField(auto_now_add=True)\\n    approved = models.BooleanField(default=False)', desc: 'Mod√®les complets' }
                            ],
                            tips: ['Utilisez SlugField pour des URLs lisibles et SEO-friendly'],
                            warnings: ['pip install Pillow pour ImageField']
                        }
                    },
                    {
                        cmd: '√âtape 3: Administration',
                        desc: 'Configurer l\'interface admin',
                        details: {
                            explanation: 'Personnaliser l\'admin Django pour une gestion efficace du contenu.',
                            syntax: '@admin.register(Model)',
                            options: [],
                            examples: [
                                { code: '# blog/admin.py\\nfrom django.contrib import admin\\nfrom .models import Article, Category, Comment\\n\\n@admin.register(Category)\\nclass CategoryAdmin(admin.ModelAdmin):\\n    list_display = ["name", "slug"]\\n    prepopulated_fields = {"slug": ("name",)}\\n\\n@admin.register(Article)\\nclass ArticleAdmin(admin.ModelAdmin):\\n    list_display = ["title", "author", "category", "status", "created"]\\n    list_filter = ["status", "category", "created"]\\n    search_fields = ["title", "content"]\\n    prepopulated_fields = {"slug": ("title",)}\\n    raw_id_fields = ["author"]\\n    date_hierarchy = "created"\\n    ordering = ["-created"]\\n    \\n    fieldsets = (\\n        (None, {"fields": ("title", "slug", "author")}),\\n        ("Contenu", {"fields": ("category", "content", "image")}),\\n        ("Publication", {"fields": ("status",), "classes": ("collapse",)}),\\n    )\\n\\n@admin.register(Comment)\\nclass CommentAdmin(admin.ModelAdmin):\\n    list_display = ["author", "article", "created", "approved"]\\n    list_filter = ["approved", "created"]\\n    actions = ["approve_comments"]\\n\\n    @admin.action(description="Approuver les commentaires")\\n    def approve_comments(self, request, queryset):\\n        queryset.update(approved=True)', desc: 'Admin personnalis√©' }
                            ],
                            tips: ['prepopulated_fields g√©n√®re automatiquement le slug depuis le titre'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 4: URLs et Vues',
                        desc: 'Routing et Class-Based Views',
                        details: {
                            explanation: 'Configurer les URLs et cr√©er des vues g√©n√©riques pour la liste et le d√©tail des articles.',
                            syntax: 'path("article/<slug:slug>/", ArticleDetailView.as_view())',
                            options: [],
                            examples: [
                                { code: '# config/urls.py\\nfrom django.contrib import admin\\nfrom django.urls import path, include\\nfrom django.conf import settings\\nfrom django.conf.urls.static import static\\n\\nurlpatterns = [\\n    path("admin/", admin.site.urls),\\n    path("", include("blog.urls")),\\n] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\\n\\n# blog/urls.py\\nfrom django.urls import path\\nfrom . import views\\n\\nurlpatterns = [\\n    path("", views.ArticleListView.as_view(), name="article_list"),\\n    path("category/<slug:slug>/", views.CategoryArticleListView.as_view(), name="category_articles"),\\n    path("article/<slug:slug>/", views.ArticleDetailView.as_view(), name="article_detail"),\\n    path("article/new/", views.ArticleCreateView.as_view(), name="article_create"),\\n]', desc: 'Configuration URLs' },
                                { code: '# blog/views.py\\nfrom django.views.generic import ListView, DetailView, CreateView\\nfrom django.contrib.auth.mixins import LoginRequiredMixin\\nfrom django.urls import reverse_lazy\\nfrom .models import Article, Category, Comment\\nfrom .forms import CommentForm\\n\\nclass ArticleListView(ListView):\\n    model = Article\\n    queryset = Article.published.select_related("author", "category")\\n    template_name = "blog/article_list.html"\\n    context_object_name = "articles"\\n    paginate_by = 10\\n\\nclass CategoryArticleListView(ListView):\\n    template_name = "blog/article_list.html"\\n    context_object_name = "articles"\\n    paginate_by = 10\\n\\n    def get_queryset(self):\\n        self.category = get_object_or_404(Category, slug=self.kwargs["slug"])\\n        return Article.published.filter(category=self.category)\\n\\n    def get_context_data(self, **kwargs):\\n        context = super().get_context_data(**kwargs)\\n        context["category"] = self.category\\n        return context\\n\\nclass ArticleDetailView(DetailView):\\n    model = Article\\n    template_name = "blog/article_detail.html"\\n    slug_field = "slug"\\n\\n    def get_context_data(self, **kwargs):\\n        context = super().get_context_data(**kwargs)\\n        context["comments"] = self.object.comments.filter(approved=True)\\n        context["comment_form"] = CommentForm()\\n        return context', desc: 'Vues g√©n√©riques' }
                            ],
                            tips: ['select_related √©vite les requ√™tes N+1 pour author et category'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 5: Templates',
                        desc: 'Base template et pages',
                        details: {
                            explanation: 'Cr√©er un syst√®me de templates avec h√©ritage pour un design coh√©rent.',
                            syntax: '{% extends "base.html" %}',
                            options: [],
                            examples: [
                                { code: '<!-- templates/base.html -->\\n{% load static %}\\n<!DOCTYPE html>\\n<html lang="fr">\\n<head>\\n    <meta charset="UTF-8">\\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\\n    <title>{% block title %}Mon Blog{% endblock %}</title>\\n    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2/dist/tailwind.min.css" rel="stylesheet">\\n</head>\\n<body class="bg-gray-100">\\n    <nav class="bg-white shadow mb-8">\\n        <div class="max-w-4xl mx-auto px-4 py-4">\\n            <a href="{% url \\'article_list\\' %}" class="text-xl font-bold">Mon Blog</a>\\n            {% if user.is_authenticated %}\\n                <a href="{% url \\'article_create\\' %}" class="ml-4">Nouvel article</a>\\n            {% endif %}\\n        </div>\\n    </nav>\\n    <main class="max-w-4xl mx-auto px-4">\\n        {% block content %}{% endblock %}\\n    </main>\\n</body>\\n</html>', desc: 'Template de base' },
                                { code: '<!-- templates/blog/article_list.html -->\\n{% extends "base.html" %}\\n\\n{% block title %}Articles{% if category %} - {{ category.name }}{% endif %}{% endblock %}\\n\\n{% block content %}\\n<h1 class="text-3xl font-bold mb-8">\\n    {% if category %}{{ category.name }}{% else %}Tous les articles{% endif %}\\n</h1>\\n\\n<div class="grid gap-6">\\n{% for article in articles %}\\n    <article class="bg-white rounded-lg shadow p-6">\\n        <h2 class="text-xl font-bold mb-2">\\n            <a href="{{ article.get_absolute_url }}" class="hover:text-blue-600">\\n                {{ article.title }}\\n            </a>\\n        </h2>\\n        <p class="text-gray-500 text-sm mb-2">\\n            Par {{ article.author }} | {{ article.created|date:"d F Y" }}\\n            {% if article.category %}| {{ article.category }}{% endif %}\\n        </p>\\n        <p>{{ article.content|truncatewords:30 }}</p>\\n    </article>\\n{% empty %}\\n    <p class="text-gray-500">Aucun article publi√©.</p>\\n{% endfor %}\\n</div>\\n\\n{% if page_obj.has_other_pages %}\\n<nav class="mt-8 flex justify-center gap-2">\\n    {% if page_obj.has_previous %}\\n        <a href="?page={{ page_obj.previous_page_number }}" class="px-4 py-2 bg-blue-500 text-white rounded">Pr√©c√©dent</a>\\n    {% endif %}\\n    <span class="px-4 py-2">Page {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>\\n    {% if page_obj.has_next %}\\n        <a href="?page={{ page_obj.next_page_number }}" class="px-4 py-2 bg-blue-500 text-white rounded">Suivant</a>\\n    {% endif %}\\n</nav>\\n{% endif %}\\n{% endblock %}', desc: 'Liste des articles avec pagination' }
                            ],
                            tips: ['Utilisez get_absolute_url() pour les liens vers les articles'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 6: Formulaires et Commentaires',
                        desc: 'Syst√®me de commentaires',
                        details: {
                            explanation: 'Impl√©menter un formulaire de commentaire avec validation et mod√©ration.',
                            syntax: 'class CommentForm(forms.ModelForm):',
                            options: [],
                            examples: [
                                { code: '# blog/forms.py\\nfrom django import forms\\nfrom .models import Comment, Article\\n\\nclass CommentForm(forms.ModelForm):\\n    class Meta:\\n        model = Comment\\n        fields = ["content"]\\n        widgets = {\\n            "content": forms.Textarea(attrs={\\n                "class": "w-full p-3 border rounded",\\n                "rows": 4,\\n                "placeholder": "Votre commentaire..."\\n            })\\n        }\\n\\nclass ArticleForm(forms.ModelForm):\\n    class Meta:\\n        model = Article\\n        fields = ["title", "category", "content", "image", "status"]\\n        widgets = {\\n            "title": forms.TextInput(attrs={"class": "w-full p-2 border rounded"}),\\n            "content": forms.Textarea(attrs={"class": "w-full p-3 border rounded", "rows": 10}),\\n        }', desc: 'Formulaires' },
                                { code: '# blog/views.py (ajout)\\nfrom django.shortcuts import get_object_or_404, redirect\\nfrom django.contrib.auth.decorators import login_required\\nfrom .forms import CommentForm\\n\\n@login_required\\ndef add_comment(request, slug):\\n    article = get_object_or_404(Article, slug=slug)\\n    if request.method == "POST":\\n        form = CommentForm(request.POST)\\n        if form.is_valid():\\n            comment = form.save(commit=False)\\n            comment.article = article\\n            comment.author = request.user\\n            comment.save()\\n            return redirect("article_detail", slug=slug)\\n    return redirect("article_detail", slug=slug)\\n\\n# blog/urls.py (ajout)\\npath("article/<slug:slug>/comment/", views.add_comment, name="add_comment"),', desc: 'Vue de commentaire' },
                                { code: '<!-- Dans article_detail.html -->\\n<section class="mt-8">\\n    <h3 class="text-xl font-bold mb-4">Commentaires ({{ comments|length }})</h3>\\n    \\n    {% for comment in comments %}\\n    <div class="bg-gray-50 rounded p-4 mb-4">\\n        <p class="font-semibold">{{ comment.author }} <span class="text-gray-500 text-sm">{{ comment.created|date:"d/m/Y H:i" }}</span></p>\\n        <p class="mt-2">{{ comment.content }}</p>\\n    </div>\\n    {% empty %}\\n    <p class="text-gray-500">Aucun commentaire.</p>\\n    {% endfor %}\\n    \\n    {% if user.is_authenticated %}\\n    <form method="post" action="{% url \\'add_comment\\' article.slug %}" class="mt-6">\\n        {% csrf_token %}\\n        {{ comment_form.content }}\\n        <button type="submit" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded">Commenter</button>\\n    </form>\\n    {% else %}\\n    <p class="mt-4"><a href="{% url \\'login\\' %}" class="text-blue-500">Connectez-vous</a> pour commenter.</p>\\n    {% endif %}\\n</section>', desc: 'Affichage des commentaires' }
                            ],
                            tips: ['Les commentaires sont en attente de mod√©ration par d√©faut (approved=False)'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 7: D√©ploiement',
                        desc: 'Production avec Gunicorn et Nginx',
                        details: {
                            explanation: 'Pr√©parer l\'application pour la production : s√©curit√©, performances et serveur web.',
                            syntax: 'gunicorn config.wsgi:application',
                            options: [],
                            examples: [
                                { code: '# requirements.txt\\nDjango>=4.2\\ngunicorn\\npsycopg2-binary  # PostgreSQL\\npillow\\ndjango-environ  # Variables d\\'environnement\\nwhitenoise  # Fichiers statiques\\n\\n# .env (NE PAS COMMIT)\\nDEBUG=False\\nSECRET_KEY=votre-cle-secrete-tres-longue\\nDATABASE_URL=postgres://user:pass@localhost/blog\\nALLOWED_HOSTS=monblog.com,www.monblog.com', desc: 'D√©pendances' },
                                { code: '# config/settings.py (production)\\nimport environ\\nenv = environ.Env()\\nenviron.Env.read_env()\\n\\nDEBUG = env.bool("DEBUG", False)\\nSECRET_KEY = env("SECRET_KEY")\\nALLOWED_HOSTS = env.list("ALLOWED_HOSTS")\\n\\n# Base de donn√©es PostgreSQL\\nDATABASES = {\\n    "default": env.db()\\n}\\n\\n# S√©curit√©\\nSECURE_BROWSER_XSS_FILTER = True\\nSECURE_CONTENT_TYPE_NOSNIFF = True\\nSESSION_COOKIE_SECURE = True\\nCSRF_COOKIE_SECURE = True\\n\\n# WhiteNoise pour les statiques\\nMIDDLEWARE = [\\n    "django.middleware.security.SecurityMiddleware",\\n    "whitenoise.middleware.WhiteNoiseMiddleware",\\n    ...\\n]\\nSTATIC_ROOT = BASE_DIR / "staticfiles"\\nSTATICFILES_STORAGE = "whitenoise.storage.CompressedManifestStaticFilesStorage"', desc: 'Settings production' },
                                { code: '# Commandes de d√©ploiement\\npython manage.py check --deploy\\npython manage.py collectstatic --noinput\\npython manage.py migrate\\ngunicorn config.wsgi:application --bind 0.0.0.0:8000 --workers 3', desc: 'Lancer en production' }
                            ],
                            tips: ['Utilisez python manage.py check --deploy pour v√©rifier la s√©curit√©'],
                            warnings: ['Ne jamais commit le fichier .env avec les secrets !']
                        }
                    }
                ]
            }
        ];
    </script>
    <script src="../js/cheatsheet.js"></script>
</body>
</html>
