<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Aide-mémoire Django Framework : workflows pratiques pour le développement web Python.">
    <title>Django Framework - IT Cheatsheets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="dark-theme text-slate-200">

    <header class="bg-slate-900/50 border-b border-white/5 py-8 px-4 relative overflow-hidden header-glow">
        <div class="max-w-4xl mx-auto relative z-10">
            <div class="flex items-center justify-between mb-4">
                <a href="../index.html" class="nav-back inline-flex items-center text-slate-400 hover:text-sky-400 transition">
                    <i class="fas fa-arrow-left mr-2"></i>Retour
                </a>
                <a href="../index.html" class="inline-flex items-center text-slate-400 hover:text-sky-400 transition">
                    <i class="fas fa-home mr-2"></i>Accueil
                </a>
            </div>
            <div class="text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-xl bg-emerald-500/20 mb-4 icon-glow">
                    <i class="fab fa-python text-3xl text-emerald-400"></i>
                </div>
                <h1 class="text-3xl font-bold mb-2 gradient-text">Django Framework</h1>
                <p class="text-slate-400">Workflows pratiques pour le développement web Python</p>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 relative z-10">
        <div class="mb-8 relative">
            <input type="text" id="searchInput" placeholder="Rechercher un workflow..."
                   class="search-dark w-full p-4 pl-12 rounded-lg outline-none transition">
            <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500"></i>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="categoriesGrid"></div>
    </main>

    <div id="detailModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50 p-4 modal-overlay" onclick="closeModal(event)">
        <div class="modal-content-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl modal-content" onclick="event.stopPropagation()">
            <div id="modalContent"></div>
        </div>
    </div>

    <footer class="border-t border-white/5 text-center text-slate-500 py-8 text-sm relative z-10">
        <p>© 2026 - Dr FENOHASINA Toto Jean Felicien</p>
    </footer>

    <script>
        const cheatsheetData = [
            {
                id: 'start-project',
                title: 'Démarrer un Projet',
                icon: 'fa-rocket',
                color: 'border-l-4 border-green-500',
                commands: [
                    {
                        cmd: 'Créer un nouveau projet Django',
                        desc: 'django-admin startproject',
                        details: {
                            explanation: 'Crée la structure de base d\'un projet Django avec les fichiers de configuration essentiels.',
                            syntax: 'django-admin startproject nom_projet [directory]',
                            options: [
                                { flag: 'nom_projet', desc: 'Nom du projet (crée un dossier)' },
                                { flag: '.', desc: 'Crée dans le dossier courant' }
                            ],
                            examples: [
                                { code: 'django-admin startproject monsite', desc: 'Crée le dossier monsite/' },
                                { code: 'django-admin startproject config .', desc: 'Crée dans le dossier courant' },
                                { code: 'mkdir monprojet && cd monprojet\ndjango-admin startproject config .', desc: 'Structure recommandée' }
                            ],
                            tips: ['Utilisez "config" comme nom si vous créez dans le dossier courant pour éviter la confusion'],
                            warnings: ['Le nom ne doit pas être un mot réservé Python (test, django, site, etc.)']
                        }
                    },
                    {
                        cmd: 'Créer une nouvelle application',
                        desc: 'python manage.py startapp',
                        details: {
                            explanation: 'Crée une application Django (models, views, urls, etc.) au sein du projet.',
                            syntax: 'python manage.py startapp nom_app',
                            options: [
                                { flag: 'nom_app', desc: 'Nom de l\'application à créer' }
                            ],
                            examples: [
                                { code: 'python manage.py startapp blog', desc: 'Application blog' },
                                { code: 'python manage.py startapp accounts', desc: 'Application authentification' },
                                { code: 'python manage.py startapp api', desc: 'Application API' }
                            ],
                            tips: ['Ajoutez immédiatement l\'app dans INSTALLED_APPS de settings.py'],
                            warnings: ['Noms au pluriel déconseillés (utilisez "blog" pas "blogs")']
                        }
                    },
                    {
                        cmd: 'Lancer le serveur de développement',
                        desc: 'python manage.py runserver',
                        details: {
                            explanation: 'Démarre le serveur web de développement Django avec rechargement automatique.',
                            syntax: 'python manage.py runserver [adresse:port]',
                            options: [
                                { flag: '8000', desc: 'Port par défaut' },
                                { flag: '8080', desc: 'Utiliser un autre port' },
                                { flag: '0.0.0.0:8000', desc: 'Accessible depuis le réseau' }
                            ],
                            examples: [
                                { code: 'python manage.py runserver', desc: 'http://127.0.0.1:8000/' },
                                { code: 'python manage.py runserver 8080', desc: 'Port 8080' },
                                { code: 'python manage.py runserver 0.0.0.0:8000', desc: 'Accessible en réseau' }
                            ],
                            tips: ['Le serveur redémarre automatiquement lors des modifications de code'],
                            warnings: ['Ne pas utiliser en production ! Utilisez gunicorn ou uwsgi']
                        }
                    },
                    {
                        cmd: 'Configurer templates et fichiers statiques',
                        desc: 'TEMPLATES et STATICFILES_DIRS',
                        details: {
                            explanation: 'Configure les chemins pour les templates HTML et les fichiers statiques (CSS, JS, images).',
                            syntax: 'settings.py configuration',
                            options: [
                                { flag: 'TEMPLATES', desc: 'Configuration des templates' },
                                { flag: 'STATICFILES_DIRS', desc: 'Dossiers de fichiers statiques' },
                                { flag: 'STATIC_URL', desc: 'URL de base pour les statiques' }
                            ],
                            examples: [
                                { code: '# settings.py\nTEMPLATES = [{\n    "BACKEND": "django.template.backends.django.DjangoTemplates",\n    "DIRS": [BASE_DIR / "templates"],\n    "APP_DIRS": True,\n    ...\n}]', desc: 'Configuration des templates' },
                                { code: '# settings.py\nSTATIC_URL = "/static/"\nSTATICFILES_DIRS = [BASE_DIR / "static"]\nSTATIC_ROOT = BASE_DIR / "staticfiles"', desc: 'Configuration des statiques' }
                            ],
                            tips: ['Créez un dossier templates/ à la racine pour les templates partagés'],
                            warnings: ['N\'oubliez pas STATIC_ROOT pour collectstatic en production']
                        }
                    },
                    {
                        cmd: 'Vérifier la configuration du projet',
                        desc: 'python manage.py check',
                        details: {
                            explanation: 'Vérifie la configuration du projet Django pour détecter les problèmes potentiels.',
                            syntax: 'python manage.py check [options]',
                            options: [
                                { flag: '--deploy', desc: 'Vérifications pour la production' },
                                { flag: '--tag security', desc: 'Vérifications de sécurité' },
                                { flag: '--database default', desc: 'Vérifier la connexion DB' }
                            ],
                            examples: [
                                { code: 'python manage.py check', desc: 'Vérification de base' },
                                { code: 'python manage.py check --deploy', desc: 'Avant déploiement' },
                                { code: 'python manage.py check --tag security', desc: 'Audit sécurité' }
                            ],
                            tips: ['Lancez check --deploy avant chaque mise en production'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'manage-database',
                title: 'Gérer la Base de Données',
                icon: 'fa-database',
                color: 'border-l-4 border-blue-500',
                commands: [
                    {
                        cmd: 'Créer/modifier la structure de la base',
                        desc: 'makemigrations pour générer les fichiers de migration',
                        details: {
                            explanation: 'Analyse les changements dans vos modèles et génère les fichiers de migration correspondants.',
                            syntax: 'python manage.py makemigrations [app_name]',
                            options: [
                                { flag: 'app_name', desc: 'Créer pour une app spécifique' },
                                { flag: '--name nom', desc: 'Nommer la migration' },
                                { flag: '--empty', desc: 'Créer une migration vide' },
                                { flag: '--dry-run', desc: 'Prévisualiser sans créer' }
                            ],
                            examples: [
                                { code: 'python manage.py makemigrations', desc: 'Toutes les apps' },
                                { code: 'python manage.py makemigrations blog', desc: 'App blog uniquement' },
                                { code: 'python manage.py makemigrations --name add_status_field', desc: 'Migration nommée' }
                            ],
                            tips: ['Commitez toujours vos fichiers de migration avec votre code'],
                            warnings: ['Vérifiez les migrations générées avant de les appliquer']
                        }
                    },
                    {
                        cmd: 'Appliquer les migrations',
                        desc: 'migrate pour exécuter les migrations',
                        details: {
                            explanation: 'Applique les migrations en attente pour synchroniser la base de données avec vos modèles.',
                            syntax: 'python manage.py migrate [app_name] [migration_name]',
                            options: [
                                { flag: 'app_name', desc: 'Migrer une app spécifique' },
                                { flag: '--fake', desc: 'Marquer comme appliquée sans exécuter' },
                                { flag: '--plan', desc: 'Voir les migrations à appliquer' }
                            ],
                            examples: [
                                { code: 'python manage.py migrate', desc: 'Appliquer toutes les migrations' },
                                { code: 'python manage.py migrate blog', desc: 'Migrer l\'app blog' },
                                { code: 'python manage.py migrate --plan', desc: 'Voir le plan d\'exécution' }
                            ],
                            tips: ['Faites un backup de la DB avant de migrer en production'],
                            warnings: ['Certaines migrations sont irréversibles (perte de données)']
                        }
                    },
                    {
                        cmd: 'Annuler une migration',
                        desc: 'migrate vers une migration antérieure',
                        details: {
                            explanation: 'Revient à un état antérieur de la base de données en annulant les migrations.',
                            syntax: 'python manage.py migrate app_name migration_number',
                            options: [
                                { flag: '0001', desc: 'Revenir à la migration 0001' },
                                { flag: 'zero', desc: 'Annuler toutes les migrations de l\'app' }
                            ],
                            examples: [
                                { code: 'python manage.py migrate blog 0001', desc: 'Revenir à 0001_initial' },
                                { code: 'python manage.py migrate blog zero', desc: 'Annuler toutes les migrations blog' },
                                { code: 'python manage.py showmigrations', desc: 'Voir l\'état des migrations' }
                            ],
                            tips: ['Utilisez showmigrations pour voir quelles migrations sont appliquées'],
                            warnings: ['Les migrations d\'annulation peuvent échouer si les données ne sont pas compatibles']
                        }
                    },
                    {
                        cmd: 'Tester des requêtes ORM rapidement',
                        desc: 'python manage.py shell',
                        details: {
                            explanation: 'Ouvre un shell Python interactif avec l\'environnement Django chargé.',
                            syntax: 'python manage.py shell [options]',
                            options: [
                                { flag: '-i ipython', desc: 'Utiliser IPython' },
                                { flag: '-i bpython', desc: 'Utiliser bpython' }
                            ],
                            examples: [
                                { code: 'python manage.py shell\n>>> from blog.models import Post\n>>> Post.objects.all()', desc: 'Requête simple' },
                                { code: '>>> Post.objects.filter(status="published").count()', desc: 'Filtrer et compter' },
                                { code: '>>> Post.objects.create(title="Test", content="...")', desc: 'Créer un objet' }
                            ],
                            tips: ['Installez django-extensions pour shell_plus avec auto-import'],
                            warnings: ['Les modifications sont persistées en base !']
                        }
                    }
                ]
            },
            {
                id: 'define-models',
                title: 'Définir mes Modèles',
                icon: 'fa-layer-group',
                color: 'border-l-4 border-cyan-500',
                commands: [
                    {
                        cmd: 'Créer des relations entre modèles',
                        desc: 'ForeignKey, ManyToMany, OneToOne',
                        details: {
                            explanation: 'Définit les relations entre vos modèles Django : un-à-plusieurs, plusieurs-à-plusieurs, un-à-un.',
                            syntax: 'models.ForeignKey(Model, on_delete=...)',
                            options: [
                                { flag: 'ForeignKey', desc: 'Relation un-à-plusieurs (N:1)' },
                                { flag: 'ManyToManyField', desc: 'Relation plusieurs-à-plusieurs (N:N)' },
                                { flag: 'OneToOneField', desc: 'Relation un-à-un (1:1)' },
                                { flag: 'on_delete', desc: 'Comportement à la suppression' }
                            ],
                            examples: [
                                { code: 'class Post(models.Model):\n    author = models.ForeignKey(\n        User,\n        on_delete=models.CASCADE,\n        related_name="posts"\n    )', desc: 'ForeignKey (auteur -> posts)' },
                                { code: 'class Post(models.Model):\n    tags = models.ManyToManyField(\n        Tag,\n        related_name="posts",\n        blank=True\n    )', desc: 'ManyToMany (posts <-> tags)' },
                                { code: 'class Profile(models.Model):\n    user = models.OneToOneField(\n        User,\n        on_delete=models.CASCADE\n    )', desc: 'OneToOne (user <-> profile)' }
                            ],
                            tips: ['Utilisez related_name pour des requêtes inverses claires'],
                            warnings: ['CASCADE supprime les objets liés, utilisez PROTECT pour éviter']
                        }
                    },
                    {
                        cmd: 'Filtrer et requêter mes données',
                        desc: 'QuerySet API (filter, exclude, annotate)',
                        details: {
                            explanation: 'Utilise l\'ORM Django pour filtrer, exclure et annoter vos données.',
                            syntax: 'Model.objects.filter(**kwargs)',
                            options: [
                                { flag: 'filter()', desc: 'Filtrer les résultats' },
                                { flag: 'exclude()', desc: 'Exclure des résultats' },
                                { flag: 'annotate()', desc: 'Ajouter des calculs' },
                                { flag: 'aggregate()', desc: 'Calculs globaux' }
                            ],
                            examples: [
                                { code: '# Filtres de base\nPost.objects.filter(status="published")\nPost.objects.filter(created__year=2024)\nPost.objects.filter(title__icontains="django")', desc: 'Filtres simples' },
                                { code: '# Filtres avancés\nfrom django.db.models import Q, Count\nPost.objects.filter(\n    Q(status="published") | Q(author=user)\n)', desc: 'Filtres avec Q objects' },
                                { code: '# Annotations\nfrom django.db.models import Count\nCategory.objects.annotate(\n    post_count=Count("posts")\n)', desc: 'Compter les posts par catégorie' }
                            ],
                            tips: ['Les QuerySets sont lazy : évalués seulement quand nécessaire'],
                            warnings: ['Évitez les requêtes dans les boucles (problème N+1)']
                        }
                    },
                    {
                        cmd: 'Optimiser mes requêtes',
                        desc: 'select_related et prefetch_related',
                        details: {
                            explanation: 'Optimise les requêtes en préchargeant les relations pour éviter les requêtes N+1.',
                            syntax: 'QuerySet.select_related("relation")',
                            options: [
                                { flag: 'select_related', desc: 'Pour ForeignKey et OneToOne (JOIN)' },
                                { flag: 'prefetch_related', desc: 'Pour ManyToMany et reverse FK' }
                            ],
                            examples: [
                                { code: '# select_related pour ForeignKey\nPost.objects.select_related("author", "category")\n# Génère 1 seule requête avec JOIN', desc: 'Précharger author et category' },
                                { code: '# prefetch_related pour ManyToMany\nPost.objects.prefetch_related("tags")\n# Génère 2 requêtes (posts + tags)', desc: 'Précharger les tags' },
                                { code: '# Combinaison\nPost.objects.select_related("author").prefetch_related("tags", "comments")', desc: 'Optimisation complète' }
                            ],
                            tips: ['Utilisez django-debug-toolbar pour visualiser les requêtes'],
                            warnings: ['select_related ne fonctionne pas avec ManyToMany']
                        }
                    },
                    {
                        cmd: 'Configurer un modèle',
                        desc: 'class Meta (ordering, verbose_name)',
                        details: {
                            explanation: 'Configure le comportement du modèle via la classe Meta interne.',
                            syntax: 'class Meta: ...',
                            options: [
                                { flag: 'ordering', desc: 'Tri par défaut' },
                                { flag: 'verbose_name', desc: 'Nom lisible singulier' },
                                { flag: 'verbose_name_plural', desc: 'Nom lisible pluriel' },
                                { flag: 'unique_together', desc: 'Contrainte d\'unicité' },
                                { flag: 'indexes', desc: 'Index de base de données' }
                            ],
                            examples: [
                                { code: 'class Post(models.Model):\n    title = models.CharField(max_length=200)\n    created = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        ordering = ["-created"]\n        verbose_name = "Article"\n        verbose_name_plural = "Articles"', desc: 'Configuration de base' },
                                { code: 'class Meta:\n    unique_together = [["author", "slug"]]\n    indexes = [\n        models.Index(fields=["status", "-created"])\n    ]', desc: 'Contraintes et index' }
                            ],
                            tips: ['L\'ordering affecte toutes les requêtes par défaut'],
                            warnings: ['unique_together est déprécié, utilisez UniqueConstraint']
                        }
                    },
                    {
                        cmd: 'Créer un Manager personnalisé',
                        desc: 'objects = CustomManager()',
                        details: {
                            explanation: 'Crée un Manager personnalisé pour ajouter des méthodes de requête réutilisables.',
                            syntax: 'class CustomManager(models.Manager): ...',
                            options: [
                                { flag: 'get_queryset()', desc: 'Personnaliser le QuerySet de base' },
                                { flag: 'méthodes custom', desc: 'Ajouter des raccourcis de requête' }
                            ],
                            examples: [
                                { code: 'class PublishedManager(models.Manager):\n    def get_queryset(self):\n        return super().get_queryset().filter(\n            status="published"\n        )\n\nclass Post(models.Model):\n    ...\n    objects = models.Manager()  # Manager par défaut\n    published = PublishedManager()  # Custom manager', desc: 'Manager pour les posts publiés' },
                                { code: '# Utilisation\nPost.objects.all()  # Tous les posts\nPost.published.all()  # Seulement les publiés', desc: 'Utilisation du manager' }
                            ],
                            tips: ['Gardez objects comme manager par défaut pour l\'admin'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'create-views',
                title: 'Créer mes Vues',
                icon: 'fa-eye',
                color: 'border-l-4 border-indigo-500',
                commands: [
                    {
                        cmd: 'Créer une vue fonction simple',
                        desc: 'def view(request): return HttpResponse',
                        details: {
                            explanation: 'Crée une vue basée sur une fonction qui traite la requête et retourne une réponse.',
                            syntax: 'def ma_vue(request): return HttpResponse(...)',
                            options: [
                                { flag: 'HttpResponse', desc: 'Réponse HTTP simple' },
                                { flag: 'render()', desc: 'Rendre un template' },
                                { flag: 'redirect()', desc: 'Rediriger vers une URL' },
                                { flag: 'JsonResponse', desc: 'Réponse JSON' }
                            ],
                            examples: [
                                { code: 'from django.shortcuts import render\n\ndef post_list(request):\n    posts = Post.objects.filter(status="published")\n    return render(request, "blog/post_list.html", {\n        "posts": posts\n    })', desc: 'Vue avec template' },
                                { code: 'from django.http import JsonResponse\n\ndef api_posts(request):\n    posts = list(Post.objects.values("id", "title"))\n    return JsonResponse({"posts": posts})', desc: 'Vue JSON' },
                                { code: 'from django.shortcuts import redirect\n\ndef my_redirect(request):\n    return redirect("blog:post_list")', desc: 'Redirection' }
                            ],
                            tips: ['Utilisez render() pour combiner template et contexte'],
                            warnings: ['N\'oubliez pas de gérer les méthodes HTTP (GET, POST)']
                        }
                    },
                    {
                        cmd: 'Utiliser une vue générique',
                        desc: 'ListView, DetailView',
                        details: {
                            explanation: 'Utilise les Class-Based Views génériques pour les opérations CRUD courantes.',
                            syntax: 'class MyView(ListView): model = MyModel',
                            options: [
                                { flag: 'ListView', desc: 'Liste d\'objets' },
                                { flag: 'DetailView', desc: 'Détail d\'un objet' },
                                { flag: 'TemplateView', desc: 'Template simple' }
                            ],
                            examples: [
                                { code: 'from django.views.generic import ListView\n\nclass PostListView(ListView):\n    model = Post\n    template_name = "blog/post_list.html"\n    context_object_name = "posts"\n    paginate_by = 10', desc: 'Liste paginée' },
                                { code: 'from django.views.generic import DetailView\n\nclass PostDetailView(DetailView):\n    model = Post\n    template_name = "blog/post_detail.html"\n    context_object_name = "post"', desc: 'Détail d\'un post' }
                            ],
                            tips: ['context_object_name rend le template plus lisible'],
                            warnings: ['Le template par défaut est app/model_list.html']
                        }
                    },
                    {
                        cmd: 'Créer une vue de formulaire',
                        desc: 'CreateView, UpdateView, DeleteView',
                        details: {
                            explanation: 'Utilise les vues génériques pour créer, modifier et supprimer des objets.',
                            syntax: 'class MyCreateView(CreateView): model = ...',
                            options: [
                                { flag: 'CreateView', desc: 'Créer un objet' },
                                { flag: 'UpdateView', desc: 'Modifier un objet' },
                                { flag: 'DeleteView', desc: 'Supprimer un objet' }
                            ],
                            examples: [
                                { code: 'from django.views.generic.edit import CreateView\nfrom django.urls import reverse_lazy\n\nclass PostCreateView(CreateView):\n    model = Post\n    fields = ["title", "content", "status"]\n    template_name = "blog/post_form.html"\n    success_url = reverse_lazy("blog:post_list")', desc: 'Créer un post' },
                                { code: 'class PostUpdateView(UpdateView):\n    model = Post\n    fields = ["title", "content", "status"]\n    template_name = "blog/post_form.html"\n    \n    def get_success_url(self):\n        return reverse("blog:post_detail", args=[self.object.pk])', desc: 'Modifier un post' },
                                { code: 'class PostDeleteView(DeleteView):\n    model = Post\n    template_name = "blog/post_confirm_delete.html"\n    success_url = reverse_lazy("blog:post_list")', desc: 'Supprimer un post' }
                            ],
                            tips: ['Utilisez reverse_lazy() pour les attributs de classe'],
                            warnings: ['DeleteView nécessite une confirmation POST']
                        }
                    },
                    {
                        cmd: 'Personnaliser queryset et contexte',
                        desc: 'get_queryset() et get_context_data()',
                        details: {
                            explanation: 'Surcharge les méthodes des CBV pour personnaliser les données.',
                            syntax: 'def get_queryset(self): ...',
                            options: [
                                { flag: 'get_queryset()', desc: 'Personnaliser les objets retournés' },
                                { flag: 'get_context_data()', desc: 'Ajouter des variables au contexte' },
                                { flag: 'get_object()', desc: 'Personnaliser la récupération d\'objet' }
                            ],
                            examples: [
                                { code: 'class PostListView(ListView):\n    model = Post\n    \n    def get_queryset(self):\n        queryset = super().get_queryset()\n        return queryset.filter(\n            status="published"\n        ).select_related("author")', desc: 'Filtrer et optimiser' },
                                { code: 'def get_context_data(self, **kwargs):\n    context = super().get_context_data(**kwargs)\n    context["categories"] = Category.objects.all()\n    context["popular_posts"] = Post.objects.order_by(\n        "-views"\n    )[:5]\n    return context', desc: 'Ajouter au contexte' }
                            ],
                            tips: ['Appelez toujours super() pour conserver le comportement de base'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Protéger une vue',
                        desc: '@login_required, @permission_required',
                        details: {
                            explanation: 'Restreint l\'accès aux vues selon l\'authentification ou les permissions.',
                            syntax: '@login_required / LoginRequiredMixin',
                            options: [
                                { flag: '@login_required', desc: 'Requiert une connexion (FBV)' },
                                { flag: 'LoginRequiredMixin', desc: 'Requiert une connexion (CBV)' },
                                { flag: '@permission_required', desc: 'Requiert une permission (FBV)' },
                                { flag: 'PermissionRequiredMixin', desc: 'Requiert une permission (CBV)' }
                            ],
                            examples: [
                                { code: 'from django.contrib.auth.decorators import login_required\n\n@login_required\ndef my_view(request):\n    return render(request, "private.html")', desc: 'Vue fonction protégée' },
                                { code: 'from django.contrib.auth.mixins import LoginRequiredMixin\n\nclass PostCreateView(LoginRequiredMixin, CreateView):\n    model = Post\n    login_url = "/login/"', desc: 'CBV avec login requis' },
                                { code: 'from django.contrib.auth.mixins import PermissionRequiredMixin\n\nclass PostDeleteView(PermissionRequiredMixin, DeleteView):\n    model = Post\n    permission_required = "blog.delete_post"', desc: 'Permission requise' }
                            ],
                            tips: ['Mettez les Mixins AVANT la vue générique dans l\'héritage'],
                            warnings: ['Configurez LOGIN_URL dans settings.py']
                        }
                    }
                ]
            },
            {
                id: 'build-templates',
                title: 'Construire mes Templates',
                icon: 'fa-file-code',
                color: 'border-l-4 border-yellow-500',
                commands: [
                    {
                        cmd: 'Afficher variables et appliquer filtres',
                        desc: '{{ var }} et {{ var|filter }}',
                        details: {
                            explanation: 'Affiche des variables et applique des filtres pour transformer les données.',
                            syntax: '{{ variable|filter:argument }}',
                            options: [
                                { flag: 'lower/upper', desc: 'Minuscules/majuscules' },
                                { flag: 'date', desc: 'Formater une date' },
                                { flag: 'default', desc: 'Valeur par défaut' },
                                { flag: 'truncatewords', desc: 'Tronquer le texte' },
                                { flag: 'safe', desc: 'Ne pas échapper le HTML' }
                            ],
                            examples: [
                                { code: '{{ post.title }}\n{{ post.title|upper }}\n{{ post.title|truncatewords:10 }}', desc: 'Affichage et filtres texte' },
                                { code: '{{ post.created|date:"d/m/Y H:i" }}\n{{ post.created|timesince }}', desc: 'Formatage de date' },
                                { code: '{{ post.content|default:"Pas de contenu" }}\n{{ post.content|safe }}', desc: 'Valeur par défaut et HTML' }
                            ],
                            tips: ['Chaînez les filtres : {{ var|lower|truncatewords:5 }}'],
                            warnings: ['N\'utilisez |safe que pour du HTML de confiance']
                        }
                    },
                    {
                        cmd: 'Faire des boucles et conditions',
                        desc: '{% for %} et {% if %}',
                        details: {
                            explanation: 'Utilise les tags de contrôle pour les boucles et conditions.',
                            syntax: '{% for item in list %}...{% endfor %}',
                            options: [
                                { flag: 'forloop.counter', desc: 'Index de la boucle (1-based)' },
                                { flag: 'forloop.first/last', desc: 'Premier/dernier élément' },
                                { flag: '{% empty %}', desc: 'Si la liste est vide' }
                            ],
                            examples: [
                                { code: '{% for post in posts %}\\n    \\x3Carticle>\\n        \\x3Ch2>{{ post.title }}\\x3C/h2>\\n        \\x3Cp>{{ post.content|truncatewords:30 }}\\x3C/p>\\n    \\x3C/article>\\n{% empty %}\\n    \\x3Cp>Aucun article.\\x3C/p>\\n{% endfor %}', desc: 'Boucle avec empty' },
                                { code: '{% if user.is_authenticated %}\\n    \\x3Cp>Bonjour {{ user.username }}\\x3C/p>\\n{% elif user.is_staff %}\\n    \\x3Cp>Bienvenue admin\\x3C/p>\\n{% else %}\\n    \\x3Ca href="{% url \'login\' %}">Connexion\\x3C/a>\\n{% endif %}', desc: 'Conditions' }
                            ],
                            tips: ['Utilisez {% empty %} plutôt qu\'un {% if %} séparé'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Hériter d\'un template de base',
                        desc: '{% extends %} et {% block %}',
                        details: {
                            explanation: 'Utilise l\'héritage de templates pour réutiliser une structure commune.',
                            syntax: '{% extends "base.html" %}',
                            options: [
                                { flag: '{% extends %}', desc: 'Hériter d\'un template parent' },
                                { flag: '{% block %}', desc: 'Définir une zone remplaçable' },
                                { flag: '{{ block.super }}', desc: 'Inclure le contenu parent' }
                            ],
                            examples: [
                                { code: '\\x3C!-- base.html -->\\n\\x3C!DOCTYPE html>\\n\\x3Chtml>\\n\\x3Chead>\\n    \\x3Ctitle>{% block title %}Mon Site{% endblock %}\\x3C/title>\\n\\x3C/head>\\n\\x3Cbody>\\n    \\x3Cnav>...\\x3C/nav>\\n    \\x3Cmain>\\n        {% block content %}{% endblock %}\\n    \\x3C/main>\\n    \\x3Cfooter>...\\x3C/footer>\\n\\x3C/body>\\n\\x3C/html>', desc: 'Template de base' },
                                { code: '\\x3C!-- blog/post_list.html -->\\n{% extends "base.html" %}\\n\\n{% block title %}Blog - {{ block.super }}{% endblock %}\\n\\n{% block content %}\\n    \\x3Ch1>Articles\\x3C/h1>\\n    {% for post in posts %}\\n        ...\\n    {% endfor %}\\n{% endblock %}', desc: 'Template enfant' }
                            ],
                            tips: ['{% extends %} doit être la première ligne du template'],
                            warnings: ['Tout contenu hors des blocks est ignoré dans un template enfant']
                        }
                    },
                    {
                        cmd: 'Générer URLs et inclure statiques',
                        desc: '{% url %} et {% static %}',
                        details: {
                            explanation: 'Génère des URLs dynamiques et inclut des fichiers statiques.',
                            syntax: '{% url "name" %} / {% static "path" %}',
                            options: [
                                { flag: '{% url %}', desc: 'Générer une URL par son nom' },
                                { flag: '{% static %}', desc: 'URL vers fichier statique' },
                                { flag: '{% load static %}', desc: 'Charger le tag static' }
                            ],
                            examples: [
                                { code: '{% load static %}\n\n\\x3Clink rel="stylesheet" href="{% static \'css/style.css\' %}">\\n\\x3Cimg src="{% static \'images/logo.png\' %}" alt="Logo">\\n\\x3Cscript src="{% static \'js/main.js\' %}">\\x3C/script>', desc: 'Fichiers statiques' },
                                { code: '\\x3Ca href="{% url \'blog:post_list\' %}">Blog\\x3C/a>\\n\\x3Ca href="{% url \'blog:post_detail\' post.pk %}">{{ post.title }}\\x3C/a>\\n\\x3Ca href="{% url \'blog:post_detail\' pk=post.pk %}">Détail\\x3C/a>', desc: 'URLs dynamiques' }
                            ],
                            tips: ['Utilisez les namespaces (app:name) pour éviter les conflits'],
                            warnings: ['{% load static %} est requis dans chaque template']
                        }
                    }
                ]
            },
            {
                id: 'handle-forms',
                title: 'Gérer les Formulaires',
                icon: 'fa-edit',
                color: 'border-l-4 border-pink-500',
                commands: [
                    {
                        cmd: 'Créer un formulaire',
                        desc: 'Form et ModelForm',
                        details: {
                            explanation: 'Crée un formulaire Django pour la saisie et validation de données.',
                            syntax: 'class MyForm(forms.Form/ModelForm): ...',
                            options: [
                                { flag: 'Form', desc: 'Formulaire personnalisé' },
                                { flag: 'ModelForm', desc: 'Formulaire lié à un modèle' }
                            ],
                            examples: [
                                { code: 'from django import forms\n\nclass ContactForm(forms.Form):\n    name = forms.CharField(max_length=100)\n    email = forms.EmailField()\n    message = forms.CharField(widget=forms.Textarea)', desc: 'Form personnalisé' },
                                { code: 'from django import forms\nfrom .models import Post\n\nclass PostForm(forms.ModelForm):\n    class Meta:\n        model = Post\n        fields = ["title", "content", "status"]\n        # ou exclude = ["author", "created"]', desc: 'ModelForm' }
                            ],
                            tips: ['Préférez ModelForm pour les formulaires liés à un modèle'],
                            warnings: ['Utilisez fields explicitement, pas __all__']
                        }
                    },
                    {
                        cmd: 'Valider et sauvegarder les données',
                        desc: 'is_valid() et save()',
                        details: {
                            explanation: 'Valide les données soumises et sauvegarde en base de données.',
                            syntax: 'form.is_valid() / form.save()',
                            options: [
                                { flag: 'is_valid()', desc: 'Valider le formulaire' },
                                { flag: 'cleaned_data', desc: 'Données validées' },
                                { flag: 'save()', desc: 'Sauvegarder (ModelForm)' },
                                { flag: 'save(commit=False)', desc: 'Créer sans sauvegarder' }
                            ],
                            examples: [
                                { code: 'def post_create(request):\n    if request.method == "POST":\n        form = PostForm(request.POST)\n        if form.is_valid():\n            post = form.save(commit=False)\n            post.author = request.user\n            post.save()\n            return redirect("blog:post_detail", pk=post.pk)\n    else:\n        form = PostForm()\n    return render(request, "blog/post_form.html", {"form": form})', desc: 'Vue complète' },
                                { code: '# Accéder aux données validées\nemail = form.cleaned_data["email"]\nmessage = form.cleaned_data["message"]', desc: 'cleaned_data' }
                            ],
                            tips: ['commit=False permet d\'ajouter des champs avant save()'],
                            warnings: ['Vérifiez toujours is_valid() avant d\'accéder à cleaned_data']
                        }
                    },
                    {
                        cmd: 'Ajouter une validation personnalisée',
                        desc: 'clean_field() et clean()',
                        details: {
                            explanation: 'Ajoute des règles de validation personnalisées au formulaire.',
                            syntax: 'def clean_field(self): ... / def clean(self): ...',
                            options: [
                                { flag: 'clean_<field>()', desc: 'Valider un champ spécifique' },
                                { flag: 'clean()', desc: 'Validation globale' }
                            ],
                            examples: [
                                { code: 'class PostForm(forms.ModelForm):\n    class Meta:\n        model = Post\n        fields = ["title", "content"]\n    \n    def clean_title(self):\n        title = self.cleaned_data["title"]\n        if "spam" in title.lower():\n            raise forms.ValidationError("Titre invalide")\n        return title', desc: 'Validation d\'un champ' },
                                { code: 'def clean(self):\n    cleaned_data = super().clean()\n    start = cleaned_data.get("start_date")\n    end = cleaned_data.get("end_date")\n    if start and end and start > end:\n        raise forms.ValidationError(\n            "La date de fin doit être après la date de début"\n        )\n    return cleaned_data', desc: 'Validation croisée' }
                            ],
                            tips: ['clean_field() doit retourner la valeur nettoyée'],
                            warnings: ['Utilisez ValidationError pour les erreurs']
                        }
                    },
                    {
                        cmd: 'Personnaliser le rendu des champs',
                        desc: 'widgets et attrs',
                        details: {
                            explanation: 'Personnalise l\'apparence des champs de formulaire.',
                            syntax: 'widgets = {"field": forms.Widget(attrs={...})}',
                            options: [
                                { flag: 'widgets', desc: 'Définir les widgets' },
                                { flag: 'attrs', desc: 'Attributs HTML' },
                                { flag: 'labels', desc: 'Labels personnalisés' },
                                { flag: 'help_texts', desc: 'Textes d\'aide' }
                            ],
                            examples: [
                                { code: 'class PostForm(forms.ModelForm):\n    class Meta:\n        model = Post\n        fields = ["title", "content"]\n        widgets = {\n            "title": forms.TextInput(attrs={\n                "class": "form-control",\n                "placeholder": "Titre de l\'article"\n            }),\n            "content": forms.Textarea(attrs={\n                "class": "form-control",\n                "rows": 10\n            })\n        }', desc: 'Widgets avec classes CSS' },
                                { code: '# Dans le template\\n\\x3Cform method="post">\\n    {% csrf_token %}\\n    {{ form.as_p }}\\n    \\x3C!-- ou champ par champ -->\\n    {{ form.title.label_tag }}\\n    {{ form.title }}\\n    {{ form.title.errors }}\\n    \\x3Cbutton type="submit">Envoyer\\x3C/button>\\n\\x3C/form>', desc: 'Rendu dans template' }
                            ],
                            tips: ['Utilisez django-crispy-forms pour un rendu Bootstrap'],
                            warnings: ['N\'oubliez jamais {% csrf_token %}']
                        }
                    }
                ]
            },
            {
                id: 'admin-site',
                title: 'Administrer mon Site',
                icon: 'fa-user-shield',
                color: 'border-l-4 border-purple-500',
                commands: [
                    {
                        cmd: 'Créer un super-utilisateur',
                        desc: 'createsuperuser',
                        details: {
                            explanation: 'Crée un compte administrateur avec tous les droits.',
                            syntax: 'python manage.py createsuperuser',
                            options: [
                                { flag: '--username', desc: 'Nom d\'utilisateur' },
                                { flag: '--email', desc: 'Adresse email' },
                                { flag: '--noinput', desc: 'Mode non-interactif' }
                            ],
                            examples: [
                                { code: 'python manage.py createsuperuser', desc: 'Mode interactif' },
                                { code: 'python manage.py createsuperuser --username admin --email admin@example.com', desc: 'Avec options' },
                                { code: '# En script (CI/CD)\nexport DJANGO_SUPERUSER_PASSWORD=secret\npython manage.py createsuperuser --noinput --username admin --email admin@test.com', desc: 'Non-interactif' }
                            ],
                            tips: ['Accédez à l\'admin via /admin/'],
                            warnings: ['Utilisez un mot de passe fort en production']
                        }
                    },
                    {
                        cmd: 'Personnaliser l\'interface admin',
                        desc: 'ModelAdmin, list_display, search_fields',
                        details: {
                            explanation: 'Configure l\'affichage et les fonctionnalités de l\'admin Django.',
                            syntax: 'class MyModelAdmin(admin.ModelAdmin): ...',
                            options: [
                                { flag: 'list_display', desc: 'Colonnes à afficher' },
                                { flag: 'list_filter', desc: 'Filtres latéraux' },
                                { flag: 'search_fields', desc: 'Champs de recherche' },
                                { flag: 'ordering', desc: 'Tri par défaut' },
                                { flag: 'readonly_fields', desc: 'Champs en lecture seule' }
                            ],
                            examples: [
                                { code: 'from django.contrib import admin\nfrom .models import Post\n\n@admin.register(Post)\nclass PostAdmin(admin.ModelAdmin):\n    list_display = ["title", "author", "status", "created"]\n    list_filter = ["status", "created", "author"]\n    search_fields = ["title", "content"]\n    ordering = ["-created"]\n    date_hierarchy = "created"', desc: 'Configuration de base' },
                                { code: '@admin.register(Post)\nclass PostAdmin(admin.ModelAdmin):\n    list_display = ["title", "author", "status", "word_count"]\n    \n    @admin.display(description="Nombre de mots")\n    def word_count(self, obj):\n        return len(obj.content.split())', desc: 'Champ calculé' }
                            ],
                            tips: ['Utilisez @admin.register au lieu de admin.site.register'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Préparer les fichiers statiques pour production',
                        desc: 'collectstatic',
                        details: {
                            explanation: 'Rassemble tous les fichiers statiques dans STATIC_ROOT pour le déploiement.',
                            syntax: 'python manage.py collectstatic',
                            options: [
                                { flag: '--noinput', desc: 'Pas de confirmation' },
                                { flag: '--clear', desc: 'Effacer avant de collecter' },
                                { flag: '--dry-run', desc: 'Simuler sans copier' }
                            ],
                            examples: [
                                { code: '# settings.py\nSTATIC_ROOT = BASE_DIR / "staticfiles"\n\n# Terminal\npython manage.py collectstatic', desc: 'Collecte de base' },
                                { code: 'python manage.py collectstatic --noinput --clear', desc: 'Pour CI/CD' }
                            ],
                            tips: ['Configurez whitenoise pour servir les statiques en production'],
                            warnings: ['Ne servez jamais les statiques avec Django en production']
                        }
                    }
                ]
            },
            {
                id: 'extend-behavior',
                title: 'Étendre le Comportement',
                icon: 'fa-plug',
                color: 'border-l-4 border-orange-500',
                commands: [
                    {
                        cmd: 'Intercepter les requêtes',
                        desc: 'Middleware personnalisé',
                        details: {
                            explanation: 'Crée un middleware pour intercepter et traiter les requêtes/réponses.',
                            syntax: 'class MyMiddleware: def __call__(self, request): ...',
                            options: [
                                { flag: '__call__()', desc: 'Traitement principal' },
                                { flag: 'process_view()', desc: 'Avant l\'appel de la vue' },
                                { flag: 'process_exception()', desc: 'En cas d\'exception' }
                            ],
                            examples: [
                                { code: '# myapp/middleware.py\nclass TimingMiddleware:\n    def __init__(self, get_response):\n        self.get_response = get_response\n    \n    def __call__(self, request):\n        import time\n        start = time.time()\n        response = self.get_response(request)\n        duration = time.time() - start\n        response["X-Request-Duration"] = str(duration)\n        return response', desc: 'Middleware de timing' },
                                { code: '# settings.py\nMIDDLEWARE = [\n    ...\n    "myapp.middleware.TimingMiddleware",\n]', desc: 'Activation' }
                            ],
                            tips: ['L\'ordre des middlewares est important (LIFO)'],
                            warnings: ['Un middleware lent affecte toutes les requêtes']
                        }
                    },
                    {
                        cmd: 'Réagir aux événements',
                        desc: 'Signaux pre_save, post_save, pre_delete',
                        details: {
                            explanation: 'Utilise les signaux Django pour exécuter du code lors d\'événements.',
                            syntax: '@receiver(signal, sender=Model)',
                            options: [
                                { flag: 'pre_save', desc: 'Avant la sauvegarde' },
                                { flag: 'post_save', desc: 'Après la sauvegarde' },
                                { flag: 'pre_delete', desc: 'Avant la suppression' },
                                { flag: 'post_delete', desc: 'Après la suppression' },
                                { flag: 'm2m_changed', desc: 'Modification ManyToMany' }
                            ],
                            examples: [
                                { code: '# signals.py\nfrom django.db.models.signals import post_save\nfrom django.dispatch import receiver\nfrom .models import User, Profile\n\n@receiver(post_save, sender=User)\ndef create_profile(sender, instance, created, **kwargs):\n    if created:\n        Profile.objects.create(user=instance)', desc: 'Créer un profil automatiquement' },
                                { code: '@receiver(pre_save, sender=Post)\ndef generate_slug(sender, instance, **kwargs):\n    if not instance.slug:\n        from django.utils.text import slugify\n        instance.slug = slugify(instance.title)', desc: 'Générer un slug' }
                            ],
                            tips: ['Créez un fichier signals.py dédié pour l\'organisation'],
                            warnings: ['Les signaux peuvent rendre le code difficile à suivre']
                        }
                    },
                    {
                        cmd: 'Configurer les signaux',
                        desc: 'apps.py ready()',
                        details: {
                            explanation: 'Configure l\'import des signaux dans apps.py pour qu\'ils soient actifs.',
                            syntax: 'def ready(self): import app.signals',
                            options: [
                                { flag: 'ready()', desc: 'Méthode appelée au démarrage' }
                            ],
                            examples: [
                                { code: '# myapp/apps.py\nfrom django.apps import AppConfig\n\nclass MyappConfig(AppConfig):\n    default_auto_field = "django.db.models.BigAutoField"\n    name = "myapp"\n    \n    def ready(self):\n        import myapp.signals  # noqa', desc: 'Configuration apps.py' },
                                { code: '# myapp/__init__.py\ndefault_app_config = "myapp.apps.MyappConfig"', desc: 'Alternative __init__.py' }
                            ],
                            tips: ['Le # noqa évite les warnings d\'import inutilisé'],
                            warnings: ['Sans ready(), les signaux ne sont pas connectés']
                        }
                    },
                    {
                        cmd: 'Créer des commandes personnalisées',
                        desc: 'management/commands/',
                        details: {
                            explanation: 'Crée des commandes manage.py personnalisées.',
                            syntax: 'class Command(BaseCommand): def handle(self, *args, **options): ...',
                            options: [
                                { flag: 'add_arguments()', desc: 'Définir les arguments' },
                                { flag: 'handle()', desc: 'Logique de la commande' },
                                { flag: 'self.stdout.write()', desc: 'Afficher des messages' }
                            ],
                            examples: [
                                { code: '# myapp/management/commands/cleanup_old_posts.py\nfrom django.core.management.base import BaseCommand\nfrom datetime import timedelta\nfrom django.utils import timezone\nfrom blog.models import Post\n\nclass Command(BaseCommand):\n    help = "Supprime les brouillons de plus de 30 jours"\n    \n    def add_arguments(self, parser):\n        parser.add_argument("--days", type=int, default=30)\n    \n    def handle(self, *args, **options):\n        days = options["days"]\n        cutoff = timezone.now() - timedelta(days=days)\n        deleted, _ = Post.objects.filter(\n            status="draft", created__lt=cutoff\n        ).delete()\n        self.stdout.write(\n            self.style.SUCCESS(f"{deleted} brouillons supprimés")\n        )', desc: 'Commande de nettoyage' },
                                { code: '# Utilisation\npython manage.py cleanup_old_posts --days 60', desc: 'Exécution' }
                            ],
                            tips: ['Utilisez self.style.SUCCESS/ERROR pour les couleurs'],
                            warnings: ['Créez le dossier management/commands/ avec __init__.py']
                        }
                    }
                ]
            },
            {
                id: 'test-debug',
                title: 'Tester et Déboguer',
                icon: 'fa-bug',
                color: 'border-l-4 border-red-500',
                commands: [
                    {
                        cmd: 'Lancer mes tests unitaires',
                        desc: 'python manage.py test',
                        details: {
                            explanation: 'Exécute les tests Django avec le test runner intégré.',
                            syntax: 'python manage.py test [app_name]',
                            options: [
                                { flag: 'app_name', desc: 'Tester une app spécifique' },
                                { flag: '-v 2', desc: 'Mode verbeux' },
                                { flag: '--keepdb', desc: 'Garder la DB de test' },
                                { flag: '-k pattern', desc: 'Filtrer par nom' }
                            ],
                            examples: [
                                { code: 'python manage.py test', desc: 'Tous les tests' },
                                { code: 'python manage.py test blog', desc: 'Tests de l\'app blog' },
                                { code: 'python manage.py test blog.tests.test_views', desc: 'Module spécifique' },
                                { code: 'python manage.py test -v 2 --keepdb', desc: 'Verbeux avec DB persistante' }
                            ],
                            tips: ['Utilisez --keepdb pour accélérer les tests répétés'],
                            warnings: ['Les tests utilisent une DB séparée (test_*)']
                        }
                    },
                    {
                        cmd: 'Vérifier la configuration avant déploiement',
                        desc: 'python manage.py check --deploy',
                        details: {
                            explanation: 'Vérifie les paramètres de sécurité et de production.',
                            syntax: 'python manage.py check --deploy',
                            options: [
                                { flag: '--deploy', desc: 'Vérifications de production' },
                                { flag: '--fail-level WARNING', desc: 'Échouer sur les warnings' }
                            ],
                            examples: [
                                { code: 'python manage.py check --deploy', desc: 'Vérification déploiement' },
                                { code: '# Points vérifiés :\n# - DEBUG = False\n# - ALLOWED_HOSTS configuré\n# - SECURE_SSL_REDIRECT\n# - SESSION_COOKIE_SECURE\n# - CSRF_COOKIE_SECURE\n# - SECRET_KEY sécurisé', desc: 'Éléments vérifiés' }
                            ],
                            tips: ['Intégrez cette commande dans votre CI/CD'],
                            warnings: ['Corrigez tous les warnings avant le déploiement']
                        }
                    },
                    {
                        cmd: 'Déboguer avec django-debug-toolbar',
                        desc: 'Installation et configuration',
                        details: {
                            explanation: 'Installe la toolbar de débogage pour analyser les requêtes, SQL, templates.',
                            syntax: 'pip install django-debug-toolbar',
                            options: [
                                { flag: 'SQL', desc: 'Voir les requêtes SQL' },
                                { flag: 'Templates', desc: 'Variables de contexte' },
                                { flag: 'Cache', desc: 'Opérations de cache' },
                                { flag: 'Signals', desc: 'Signaux émis' }
                            ],
                            examples: [
                                { code: '# Installation\npip install django-debug-toolbar\n\n# settings.py\nINSTALLED_APPS = [\n    ...\n    "debug_toolbar",\n]\n\nMIDDLEWARE = [\n    "debug_toolbar.middleware.DebugToolbarMiddleware",\n    ...\n]\n\nINTERNAL_IPS = ["127.0.0.1"]', desc: 'Configuration de base' },
                                { code: '# urls.py\nfrom django.conf import settings\n\nif settings.DEBUG:\n    import debug_toolbar\n    urlpatterns = [\n        path("__debug__/", include(debug_toolbar.urls)),\n    ] + urlpatterns', desc: 'Configuration URLs' }
                            ],
                            tips: ['Analysez le panneau SQL pour détecter les requêtes N+1'],
                            warnings: ['Ne jamais activer en production !']
                        }
                    }
                ]
            },
            {
                id: 'project-blog',
                title: 'Projet: Blog Django Complet',
                icon: 'fa-newspaper',
                color: 'border-l-4 border-emerald-500',
                commands: [
                    {
                        cmd: 'Étape 1: Initialisation du projet',
                        desc: 'Structure et configuration de base',
                        details: {
                            explanation: 'Crée la structure du projet Django avec une application blog.',
                            syntax: 'django-admin startproject / python manage.py startapp',
                            options: [],
                            examples: [
                                { code: '# Création du projet\nmkdir mon_blog && cd mon_blog\npython -m venv venv\nsource venv/bin/activate  # ou venv\\Scripts\\activate (Windows)\npip install django\n\ndjango-admin startproject config .\npython manage.py startapp blog', desc: 'Structure initiale' },
                                { code: '# settings.py\nINSTALLED_APPS = [\n    ...\n    "blog",\n]\n\nTEMPLATES = [{\n    ...\n    "DIRS": [BASE_DIR / "templates"],\n}]\n\nSTATIC_URL = "/static/"\nSTATICFILES_DIRS = [BASE_DIR / "static"]', desc: 'Configuration settings.py' }
                            ],
                            tips: ['Créez les dossiers templates/ et static/ à la racine'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Étape 2: Modèles de données',
                        desc: 'Post et Category',
                        details: {
                            explanation: 'Définit les modèles pour les articles et catégories.',
                            syntax: 'class Post(models.Model): ...',
                            options: [],
                            examples: [
                                { code: '# blog/models.py\nfrom django.db import models\nfrom django.contrib.auth.models import User\nfrom django.urls import reverse\n\nclass Category(models.Model):\n    name = models.CharField(max_length=100)\n    slug = models.SlugField(unique=True)\n    \n    class Meta:\n        verbose_name_plural = "Categories"\n    \n    def __str__(self):\n        return self.name', desc: 'Modèle Category' },
                                { code: 'class Post(models.Model):\n    STATUS_CHOICES = [\n        ("draft", "Brouillon"),\n        ("published", "Publié"),\n    ]\n    \n    title = models.CharField(max_length=200)\n    slug = models.SlugField(unique=True)\n    author = models.ForeignKey(User, on_delete=models.CASCADE)\n    category = models.ForeignKey(Category, on_delete=models.SET_NULL, null=True)\n    content = models.TextField()\n    status = models.CharField(max_length=10, choices=STATUS_CHOICES, default="draft")\n    created = models.DateTimeField(auto_now_add=True)\n    updated = models.DateTimeField(auto_now=True)\n    \n    class Meta:\n        ordering = ["-created"]\n    \n    def __str__(self):\n        return self.title\n    \n    def get_absolute_url(self):\n        return reverse("blog:post_detail", args=[self.slug])', desc: 'Modèle Post' },
                                { code: '# Migrations\npython manage.py makemigrations\npython manage.py migrate', desc: 'Créer les tables' }
                            ],
                            tips: ['get_absolute_url() est utilisé par l\'admin et les redirections'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Étape 3: Administration',
                        desc: 'Interface admin personnalisée',
                        details: {
                            explanation: 'Configure l\'interface d\'administration pour gérer les articles.',
                            syntax: '@admin.register(Model)',
                            options: [],
                            examples: [
                                { code: '# blog/admin.py\nfrom django.contrib import admin\nfrom .models import Post, Category\n\n@admin.register(Category)\nclass CategoryAdmin(admin.ModelAdmin):\n    list_display = ["name", "slug"]\n    prepopulated_fields = {"slug": ("name",)}\n\n@admin.register(Post)\nclass PostAdmin(admin.ModelAdmin):\n    list_display = ["title", "author", "category", "status", "created"]\n    list_filter = ["status", "created", "category"]\n    search_fields = ["title", "content"]\n    prepopulated_fields = {"slug": ("title",)}\n    raw_id_fields = ["author"]\n    date_hierarchy = "created"\n    ordering = ["-created"]', desc: 'Configuration admin' },
                                { code: '# Créer un superuser\npython manage.py createsuperuser', desc: 'Accès admin' }
                            ],
                            tips: ['prepopulated_fields génère le slug automatiquement'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Étape 4: URLs et Vues',
                        desc: 'Routing et Class-Based Views',
                        details: {
                            explanation: 'Configure les URLs et les vues pour afficher les articles.',
                            syntax: 'path() et ListView/DetailView',
                            options: [],
                            examples: [
                                { code: '# blog/urls.py\nfrom django.urls import path\nfrom . import views\n\napp_name = "blog"\n\nurlpatterns = [\n    path("", views.PostListView.as_view(), name="post_list"),\n    path("post/<slug:slug>/", views.PostDetailView.as_view(), name="post_detail"),\n    path("category/<slug:slug>/", views.CategoryPostListView.as_view(), name="category_posts"),\n]', desc: 'URLs du blog' },
                                { code: '# blog/views.py\nfrom django.views.generic import ListView, DetailView\nfrom .models import Post, Category\n\nclass PostListView(ListView):\n    queryset = Post.objects.filter(status="published")\n    template_name = "blog/post_list.html"\n    context_object_name = "posts"\n    paginate_by = 10\n\nclass PostDetailView(DetailView):\n    model = Post\n    template_name = "blog/post_detail.html"\n    context_object_name = "post"\n\nclass CategoryPostListView(ListView):\n    template_name = "blog/post_list.html"\n    context_object_name = "posts"\n    paginate_by = 10\n    \n    def get_queryset(self):\n        self.category = Category.objects.get(slug=self.kwargs["slug"])\n        return Post.objects.filter(category=self.category, status="published")', desc: 'Vues' },
                                { code: '# config/urls.py\nfrom django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path("admin/", admin.site.urls),\n    path("", include("blog.urls")),\n]', desc: 'URLs principales' }
                            ],
                            tips: ['app_name crée un namespace pour les URLs'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Étape 5: Templates',
                        desc: 'Base et templates de liste/détail',
                        details: {
                            explanation: 'Crée les templates avec héritage pour le blog.',
                            syntax: '{% extends %} et {% block %}',
                            options: [],
                            examples: [
                                { code: '\\x3C!-- templates/base.html -->\\n{% load static %}\\n\\x3C!DOCTYPE html>\\n\\x3Chtml lang="fr">\\n\\x3Chead>\\n    \\x3Cmeta charset="UTF-8">\\n    \\x3Ctitle>{% block title %}Mon Blog{% endblock %}\\x3C/title>\\n    \\x3Clink rel="stylesheet" href="{% static \'css/style.css\' %}">\\n\\x3C/head>\\n\\x3Cbody>\\n    \\x3Cheader>\\n        \\x3Cnav>\\n            \\x3Ca href="{% url \'blog:post_list\' %}">Accueil\\x3C/a>\\n        \\x3C/nav>\\n    \\x3C/header>\\n    \\x3Cmain>\\n        {% block content %}{% endblock %}\\n    \\x3C/main>\\n    \\x3Cfooter>\\n        \\x3Cp>© 2024 Mon Blog\\x3C/p>\\n    \\x3C/footer>\\n\\x3C/body>\\n\\x3C/html>', desc: 'Template de base' },
                                { code: '\\x3C!-- templates/blog/post_list.html -->\\n{% extends "base.html" %}\\n\\n{% block title %}Articles - {{ block.super }}{% endblock %}\\n\\n{% block content %}\\n\\x3Ch1>Articles\\x3C/h1>\\n{% for post in posts %}\\n    \\x3Carticle>\\n        \\x3Ch2>\\x3Ca href="{{ post.get_absolute_url }}">{{ post.title }}\\x3C/a>\\x3C/h2>\\n        \\x3Cp class="meta">Par {{ post.author }} le {{ post.created|date:"d/m/Y" }}\\x3C/p>\\n        \\x3Cp>{{ post.content|truncatewords:30 }}\\x3C/p>\\n    \\x3C/article>\\n{% empty %}\\n    \\x3Cp>Aucun article.\\x3C/p>\\n{% endfor %}\\n\\n{% if page_obj.has_other_pages %}\\n\\x3Cnav class="pagination">\\n    {% if page_obj.has_previous %}\\n        \\x3Ca href="?page={{ page_obj.previous_page_number }}">Précédent\\x3C/a>\\n    {% endif %}\\n    \\x3Cspan>Page {{ page_obj.number }} sur {{ page_obj.paginator.num_pages }}\\x3C/span>\\n    {% if page_obj.has_next %}\\n        \\x3Ca href="?page={{ page_obj.next_page_number }}">Suivant\\x3C/a>\\n    {% endif %}\\n\\x3C/nav>\\n{% endif %}\\n{% endblock %}', desc: 'Liste des articles' }
                            ],
                            tips: ['Utilisez page_obj pour la pagination'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Étape 6: Formulaires et Commentaires',
                        desc: 'Ajout de commentaires',
                        details: {
                            explanation: 'Ajoute un système de commentaires avec formulaire.',
                            syntax: 'ModelForm et CreateView',
                            options: [],
                            examples: [
                                { code: '# blog/models.py (ajouter)\nclass Comment(models.Model):\n    post = models.ForeignKey(Post, on_delete=models.CASCADE, related_name="comments")\n    author = models.ForeignKey(User, on_delete=models.CASCADE)\n    content = models.TextField()\n    created = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        ordering = ["created"]\n    \n    def __str__(self):\n        return f"Commentaire de {self.author} sur {self.post}"', desc: 'Modèle Comment' },
                                { code: '# blog/forms.py\nfrom django import forms\nfrom .models import Comment\n\nclass CommentForm(forms.ModelForm):\n    class Meta:\n        model = Comment\n        fields = ["content"]\n        widgets = {\n            "content": forms.Textarea(attrs={\n                "rows": 4,\n                "placeholder": "Votre commentaire..."\n            })\n        }', desc: 'Formulaire commentaire' },
                                { code: '# blog/views.py (modifier PostDetailView)\nfrom django.views.generic import DetailView\nfrom django.views.generic.edit import FormMixin\nfrom .forms import CommentForm\n\nclass PostDetailView(FormMixin, DetailView):\n    model = Post\n    template_name = "blog/post_detail.html"\n    context_object_name = "post"\n    form_class = CommentForm\n    \n    def get_success_url(self):\n        return self.object.get_absolute_url()\n    \n    def post(self, request, *args, **kwargs):\n        self.object = self.get_object()\n        form = self.get_form()\n        if form.is_valid():\n            comment = form.save(commit=False)\n            comment.post = self.object\n            comment.author = request.user\n            comment.save()\n            return self.form_valid(form)\n        return self.form_invalid(form)', desc: 'Vue avec formulaire' }
                            ],
                            tips: ['Utilisez LoginRequiredMixin pour les commentaires authentifiés'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Étape 7: Déploiement',
                        desc: 'Préparation pour la production',
                        details: {
                            explanation: 'Configure les paramètres pour le déploiement en production.',
                            syntax: 'settings.py production',
                            options: [],
                            examples: [
                                { code: '# settings.py - Production\nimport os\nfrom pathlib import Path\n\nDEBUG = False\nALLOWED_HOSTS = ["mondomaine.com", "www.mondomaine.com"]\n\n# Sécurité\nSECRET_KEY = os.environ.get("DJANGO_SECRET_KEY")\nSECURE_SSL_REDIRECT = True\nSESSION_COOKIE_SECURE = True\nCSRF_COOKIE_SECURE = True\nSECURE_HSTS_SECONDS = 31536000\n\n# Statiques\nSTATIC_ROOT = BASE_DIR / "staticfiles"\n\n# Base de données\nDATABASES = {\n    "default": {\n        "ENGINE": "django.db.backends.postgresql",\n        "NAME": os.environ.get("DB_NAME"),\n        "USER": os.environ.get("DB_USER"),\n        "PASSWORD": os.environ.get("DB_PASSWORD"),\n        "HOST": os.environ.get("DB_HOST"),\n        "PORT": "5432",\n    }\n}', desc: 'Settings production' },
                                { code: '# requirements.txt\nDjango>=4.2\ngunicorn\npsycopg2-binary\nwhitenoise\n\n# Commandes de déploiement\npip install -r requirements.txt\npython manage.py collectstatic --noinput\npython manage.py migrate\ngunicorn config.wsgi:application', desc: 'Déploiement' }
                            ],
                            tips: ['Utilisez des variables d\'environnement pour les secrets'],
                            warnings: ['Ne commitez jamais SECRET_KEY ou les credentials DB']
                        }
                    }
                ]
            }
        ];
    </script>
    <script src="../js/cheatsheet.js"></script>
</body>
</html>
