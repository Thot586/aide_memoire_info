<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Aide-m√©moire Docker : gestion des conteneurs, images et Docker Compose.">
    <title>Docker M√©mo - IT Cheatsheets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="dark-theme text-slate-200">

    <header class="bg-slate-900/50 border-b border-white/5 py-8 px-4 relative overflow-hidden header-glow">
        <div class="max-w-4xl mx-auto relative z-10">
            <div class="flex items-center justify-between mb-4">
                <a href="../index.html" class="nav-back inline-flex items-center text-slate-400 hover:text-sky-400 transition">
                    <i class="fas fa-arrow-left mr-2"></i>Retour
                </a>
                <a href="../index.html" class="inline-flex items-center text-slate-400 hover:text-sky-400 transition">
                    <i class="fas fa-home mr-2"></i>Accueil
                </a>
            </div>
            <div class="text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-xl bg-sky-500/20 mb-4 icon-glow">
                    <i class="fab fa-docker text-3xl text-sky-400"></i>
                </div>
                <h1 class="text-3xl font-bold mb-2 gradient-text">Docker M√©mo</h1>
                <p class="text-slate-400">Gestion des conteneurs, images et Dockerfile de base</p>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 relative z-10">
        <div class="mb-8 relative">
            <input type="text" id="searchInput" placeholder="Rechercher une commande..."
                   class="search-dark w-full p-4 pl-12 rounded-lg outline-none transition">
            <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500"></i>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="categoriesGrid"></div>
    </main>

    <div id="detailModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50 p-4 modal-overlay" onclick="closeModal(event)">
        <div class="modal-content-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl modal-content" onclick="event.stopPropagation()">
            <div id="modalContent"></div>
        </div>
    </div>

    <footer class="border-t border-white/5 text-center text-slate-500 py-8 text-sm relative z-10">
        <p>¬© 2026 - Dr FENOHASINA Toto Jean Felicien</p>
    </footer>

    <script>
        const cheatsheetData = [
            {
                id: 'images',
                title: 'Images',
                icon: 'fa-layer-group',
                color: 'border-l-4 border-sky-500',
                commands: [
                    {
                        cmd: 'docker build -t nom:tag .',
                        desc: 'Construire une image',
                        details: {
                            explanation: 'Construit une image Docker √† partir d\'un Dockerfile dans le r√©pertoire courant.',
                            syntax: 'docker build [options] chemin',
                            options: [
                                { flag: '-t nom:tag', desc: 'Nommer et taguer l\'image' },
                                { flag: '-f Dockerfile', desc: 'Sp√©cifier un Dockerfile diff√©rent' },
                                { flag: '--no-cache', desc: 'Ne pas utiliser le cache' }
                            ],
                            examples: [
                                { code: 'docker build -t monapp:1.0 .', desc: 'Build avec tag' },
                                { code: 'docker build -t monapp:latest --no-cache .', desc: 'Build sans cache' }
                            ],
                            tips: ['Le point "." √† la fin indique le contexte de build'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'docker images',
                        desc: 'Lister les images',
                        details: {
                            explanation: 'Affiche toutes les images Docker pr√©sentes localement.',
                            syntax: 'docker images [options]',
                            options: [
                                { flag: '-a', desc: 'Afficher toutes les images (y compris interm√©diaires)' },
                                { flag: '-q', desc: 'Afficher uniquement les IDs' }
                            ],
                            examples: [
                                { code: 'docker images', desc: 'Liste des images' },
                                { code: 'docker images -q', desc: 'IDs seulement' },
                                { code: 'docker rmi image_id', desc: 'Supprimer une image' }
                            ],
                            tips: ['docker image prune pour nettoyer les images non utilis√©es'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'docker pull image:tag',
                        desc: 'T√©l√©charger une image',
                        details: {
                            explanation: 'T√©l√©charge une image depuis Docker Hub ou un autre registre.',
                            syntax: 'docker pull image[:tag]',
                            options: [],
                            examples: [
                                { code: 'docker pull python:3.11', desc: 'Image Python 3.11' },
                                { code: 'docker pull nginx:alpine', desc: 'Nginx version l√©g√®re' },
                                { code: 'docker pull postgres:15', desc: 'PostgreSQL 15' }
                            ],
                            tips: ['Sans tag, "latest" est utilis√© par d√©faut'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'containers',
                title: 'Conteneurs',
                icon: 'fa-box',
                color: 'border-l-4 border-green-500',
                commands: [
                    {
                        cmd: 'docker run image',
                        desc: 'Lancer un conteneur',
                        details: {
                            explanation: 'Cr√©e et d√©marre un nouveau conteneur √† partir d\'une image.',
                            syntax: 'docker run [options] image [commande]',
                            options: [
                                { flag: '-d', desc: 'Mode d√©tach√© (arri√®re-plan)' },
                                { flag: '-p 8080:80', desc: 'Mapper port h√¥te:conteneur' },
                                { flag: '-v /host:/container', desc: 'Monter un volume' },
                                { flag: '--name mon_conteneur', desc: 'Nommer le conteneur' },
                                { flag: '-e VAR=value', desc: 'Variable d\'environnement' },
                                { flag: '--rm', desc: 'Supprimer apr√®s arr√™t' },
                                { flag: '-it', desc: 'Mode interactif avec terminal' }
                            ],
                            examples: [
                                { code: 'docker run -d -p 8080:80 nginx', desc: 'Nginx sur port 8080' },
                                { code: 'docker run -it python:3.11 bash', desc: 'Shell interactif Python' },
                                { code: 'docker run -d --name db -e POSTGRES_PASSWORD=secret postgres', desc: 'PostgreSQL avec mot de passe' }
                            ],
                            tips: ['Combinez -d et --rm pour des conteneurs temporaires'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'docker ps',
                        desc: 'Lister les conteneurs',
                        details: {
                            explanation: 'Affiche les conteneurs en cours d\'ex√©cution.',
                            syntax: 'docker ps [options]',
                            options: [
                                { flag: '-a', desc: 'Tous les conteneurs (y compris arr√™t√©s)' },
                                { flag: '-q', desc: 'IDs seulement' }
                            ],
                            examples: [
                                { code: 'docker ps', desc: 'Conteneurs actifs' },
                                { code: 'docker ps -a', desc: 'Tous les conteneurs' }
                            ],
                            tips: ['docker stats pour voir l\'utilisation des ressources'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'docker stop conteneur',
                        desc: 'Arr√™ter un conteneur',
                        details: {
                            explanation: 'Arr√™te gracieusement un conteneur en cours d\'ex√©cution.',
                            syntax: 'docker stop conteneur_id_ou_nom',
                            options: [
                                { flag: '-t seconds', desc: 'Timeout avant kill (d√©faut: 10s)' }
                            ],
                            examples: [
                                { code: 'docker stop mon_conteneur', desc: 'Arr√™ter par nom' },
                                { code: 'docker stop $(docker ps -q)', desc: 'Arr√™ter tous les conteneurs' },
                                { code: 'docker rm conteneur', desc: 'Supprimer un conteneur arr√™t√©' }
                            ],
                            tips: ['docker kill pour forcer l\'arr√™t imm√©diat'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'compose',
                title: 'Docker Compose',
                icon: 'fa-cubes',
                color: 'border-l-4 border-purple-500',
                commands: [
                    {
                        cmd: 'docker compose up',
                        desc: 'D√©marrer les services',
                        details: {
                            explanation: 'D√©marre tous les services d√©finis dans docker-compose.yml.',
                            syntax: 'docker compose up [options] [service...]',
                            options: [
                                { flag: '-d', desc: 'Mode d√©tach√©' },
                                { flag: '--build', desc: 'Reconstruire les images avant' },
                                { flag: '--force-recreate', desc: 'Recr√©er les conteneurs' }
                            ],
                            examples: [
                                { code: 'docker compose up -d', desc: 'D√©marrer en arri√®re-plan' },
                                { code: 'docker compose up --build', desc: 'Rebuild et d√©marrer' },
                                { code: 'docker compose up -d web db', desc: 'Services sp√©cifiques' }
                            ],
                            tips: ['docker-compose (avec tiret) pour les anciennes versions'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'docker compose down',
                        desc: 'Arr√™ter et supprimer',
                        details: {
                            explanation: 'Arr√™te et supprime les conteneurs, r√©seaux cr√©√©s par "up".',
                            syntax: 'docker compose down [options]',
                            options: [
                                { flag: '-v', desc: 'Supprimer aussi les volumes' },
                                { flag: '--rmi all', desc: 'Supprimer les images' }
                            ],
                            examples: [
                                { code: 'docker compose down', desc: 'Arr√™ter proprement' },
                                { code: 'docker compose down -v', desc: 'Arr√™ter et supprimer les donn√©es' }
                            ],
                            tips: ['Sans -v, les volumes persistent'],
                            warnings: ['-v supprime les donn√©es des volumes !']
                        }
                    },
                    {
                        cmd: 'docker compose logs',
                        desc: 'Voir les logs',
                        details: {
                            explanation: 'Affiche les logs de tous les services ou d\'un service sp√©cifique.',
                            syntax: 'docker compose logs [options] [service]',
                            options: [
                                { flag: '-f', desc: 'Suivre en temps r√©el' },
                                { flag: '--tail 100', desc: 'Derni√®res N lignes' }
                            ],
                            examples: [
                                { code: 'docker compose logs', desc: 'Tous les logs' },
                                { code: 'docker compose logs -f web', desc: 'Suivre les logs du service web' }
                            ],
                            tips: ['Ctrl+C pour arr√™ter le suivi (-f)'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'debug',
                title: 'D√©bogage',
                icon: 'fa-bug',
                color: 'border-l-4 border-orange-500',
                commands: [
                    {
                        cmd: 'docker exec -it conteneur bash',
                        desc: 'Entrer dans un conteneur',
                        details: {
                            explanation: 'Ex√©cute une commande dans un conteneur en cours. Avec bash, ouvre un shell.',
                            syntax: 'docker exec [options] conteneur commande',
                            options: [
                                { flag: '-it', desc: 'Mode interactif avec TTY' },
                                { flag: '-u user', desc: 'Ex√©cuter en tant qu\'utilisateur' }
                            ],
                            examples: [
                                { code: 'docker exec -it web bash', desc: 'Shell bash' },
                                { code: 'docker exec -it web sh', desc: 'Shell sh (si pas de bash)' },
                                { code: 'docker exec web cat /etc/hosts', desc: 'Commande simple' }
                            ],
                            tips: ['Utilisez sh si bash n\'est pas disponible (images Alpine)'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'docker logs conteneur',
                        desc: 'Voir les logs d\'un conteneur',
                        details: {
                            explanation: 'Affiche les logs (stdout/stderr) d\'un conteneur.',
                            syntax: 'docker logs [options] conteneur',
                            options: [
                                { flag: '-f', desc: 'Suivre en temps r√©el' },
                                { flag: '--tail N', desc: 'Derni√®res N lignes' },
                                { flag: '--since 1h', desc: 'Depuis 1 heure' }
                            ],
                            examples: [
                                { code: 'docker logs web', desc: 'Tous les logs' },
                                { code: 'docker logs -f --tail 50 web', desc: 'Suivre les 50 derni√®res lignes' }
                            ],
                            tips: ['Les logs persistent m√™me si le conteneur est arr√™t√©'],
                            warnings: []
                        }
                    }
                ]
            },
            {
                id: 'networking',
                title: 'R√©seau Docker',
                icon: 'fa-network-wired',
                color: 'border-l-4 border-cyan-500',
                commands: [
                    {
                        cmd: 'docker network ls',
                        desc: 'Lister les r√©seaux',
                        details: {
                            explanation: 'Affiche tous les r√©seaux Docker disponibles sur l\'h√¥te.',
                            syntax: 'docker network ls [options]',
                            options: [
                                { flag: '--filter driver=bridge', desc: 'Filtrer par type de driver' },
                                { flag: '-q', desc: 'Afficher uniquement les IDs' }
                            ],
                            examples: [
                                { code: 'docker network ls', desc: 'Liste tous les r√©seaux' },
                                { code: 'docker network inspect bridge', desc: 'D√©tails du r√©seau bridge' }
                            ],
                            tips: ['Les r√©seaux par d√©faut : bridge, host, none'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'docker network create',
                        desc: 'Cr√©er un r√©seau personnalis√©',
                        details: {
                            explanation: 'Cr√©e un r√©seau Docker pour isoler et connecter des conteneurs.',
                            syntax: 'docker network create [options] <nom>',
                            options: [
                                { flag: '--driver bridge', desc: 'Type de r√©seau (bridge, overlay, macvlan)' },
                                { flag: '--subnet 172.20.0.0/16', desc: 'D√©finir le sous-r√©seau' },
                                { flag: '--gateway 172.20.0.1', desc: 'Passerelle du r√©seau' },
                                { flag: '--ip-range', desc: 'Plage d\'IPs allouables' }
                            ],
                            examples: [
                                { code: 'docker network create mon-reseau', desc: 'R√©seau bridge simple' },
                                { code: 'docker network create --driver bridge --subnet 172.28.0.0/16 app-network', desc: 'R√©seau avec subnet personnalis√©' },
                                { code: 'docker run -d --network mon-reseau --name web nginx', desc: 'Conteneur sur r√©seau custom' }
                            ],
                            tips: ['Les conteneurs sur le m√™me r√©seau custom peuvent communiquer par nom'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'docker network connect',
                        desc: 'Connecter un conteneur √† un r√©seau',
                        details: {
                            explanation: 'Attache un conteneur existant √† un r√©seau suppl√©mentaire.',
                            syntax: 'docker network connect [options] <r√©seau> <conteneur>',
                            options: [
                                { flag: '--ip 172.20.0.10', desc: 'IP fixe dans le r√©seau' },
                                { flag: '--alias web-alias', desc: 'Alias DNS dans le r√©seau' }
                            ],
                            examples: [
                                { code: 'docker network connect mon-reseau mon-conteneur', desc: 'Connexion simple' },
                                { code: 'docker network disconnect mon-reseau mon-conteneur', desc: 'D√©connexion' },
                                { code: 'docker run -d --network=host nginx', desc: 'Utiliser le r√©seau h√¥te' }
                            ],
                            tips: ['Un conteneur peut √™tre sur plusieurs r√©seaux simultan√©ment'],
                            warnings: ['Le mode --network=host expose tous les ports sur l\'h√¥te']
                        }
                    }
                ]
            },
            {
                id: 'volumes',
                title: 'Volumes & Stockage',
                icon: 'fa-hdd',
                color: 'border-l-4 border-yellow-500',
                commands: [
                    {
                        cmd: 'docker volume create',
                        desc: 'Cr√©er un volume nomm√©',
                        details: {
                            explanation: 'Cr√©e un volume Docker persistant g√©r√© par Docker.',
                            syntax: 'docker volume create [options] <nom>',
                            options: [
                                { flag: '--driver local', desc: 'Driver de stockage' },
                                { flag: '--label key=value', desc: 'Ajouter des labels' }
                            ],
                            examples: [
                                { code: 'docker volume create db-data', desc: 'Cr√©er un volume' },
                                { code: 'docker volume ls', desc: 'Lister les volumes' },
                                { code: 'docker volume inspect db-data', desc: 'D√©tails du volume' }
                            ],
                            tips: ['Les volumes persistent m√™me apr√®s suppression du conteneur'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '-v ou --mount',
                        desc: 'Monter un volume dans un conteneur',
                        details: {
                            explanation: 'Attache un volume ou un r√©pertoire h√¥te √† un conteneur.',
                            syntax: 'docker run -v <source>:<destination>[:options]',
                            options: [
                                { flag: '-v nom:/chemin', desc: 'Volume nomm√©' },
                                { flag: '-v /host:/container', desc: 'Bind mount (r√©pertoire h√¥te)' },
                                { flag: '-v /chemin:ro', desc: 'Montage en lecture seule' },
                                { flag: '--mount type=volume,src=nom,dst=/chemin', desc: 'Syntaxe explicite' }
                            ],
                            examples: [
                                { code: 'docker run -d -v db-data:/var/lib/postgresql/data postgres', desc: 'Volume nomm√© pour PostgreSQL' },
                                { code: 'docker run -d -v $(pwd):/app:ro node:18', desc: 'Code source en lecture seule' },
                                { code: 'docker run -d --mount type=bind,src=/data,dst=/data,readonly nginx', desc: 'Mount explicite readonly' }
                            ],
                            tips: ['--mount est plus explicite et recommand√© pour les cas complexes'],
                            warnings: ['Les bind mounts peuvent √©craser des fichiers existants dans le conteneur']
                        }
                    },
                    {
                        cmd: 'docker volume prune',
                        desc: 'Nettoyer les volumes inutilis√©s',
                        details: {
                            explanation: 'Supprime tous les volumes non utilis√©s par au moins un conteneur.',
                            syntax: 'docker volume prune [options]',
                            options: [
                                { flag: '-f, --force', desc: 'Ne pas demander confirmation' },
                                { flag: '--filter', desc: 'Filtrer les volumes √† supprimer' }
                            ],
                            examples: [
                                { code: 'docker volume prune', desc: 'Supprimer volumes orphelins' },
                                { code: 'docker volume rm db-data', desc: 'Supprimer un volume sp√©cifique' },
                                { code: 'docker system prune -a --volumes', desc: 'Nettoyage complet (images, conteneurs, volumes)' }
                            ],
                            tips: ['Faites un backup avant de supprimer des volumes de donn√©es'],
                            warnings: ['prune supprime d√©finitivement les donn√©es!']
                        }
                    }
                ]
            },
            {
                id: 'multistage',
                title: 'Multi-stage & Optimisation',
                icon: 'fa-layer-group',
                color: 'border-l-4 border-indigo-500',
                commands: [
                    {
                        cmd: 'Multi-stage Build',
                        desc: 'R√©duire la taille des images',
                        details: {
                            explanation: 'Utilise plusieurs FROM pour s√©parer build et runtime, r√©duisant drastiquement la taille finale.',
                            syntax: 'FROM image AS builder\\n...\\nFROM image-finale\\nCOPY --from=builder ...',
                            options: [
                                { flag: 'AS <nom>', desc: 'Nommer une √©tape' },
                                { flag: '--from=<√©tape>', desc: 'Copier depuis une √©tape' },
                                { flag: '--target=<√©tape>', desc: 'Construire jusqu\'√† une √©tape' }
                            ],
                            examples: [
                                { code: '# √âtape build\nFROM node:18 AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci\nCOPY . .\nRUN npm run build\n\n# √âtape production\nFROM node:18-alpine\nWORKDIR /app\nCOPY --from=builder /app/dist ./dist\nCOPY --from=builder /app/node_modules ./node_modules\nCMD ["node", "dist/index.js"]', desc: 'Node.js multi-stage' },
                                { code: '# Python multi-stage\nFROM python:3.11 AS builder\nRUN pip wheel --no-cache-dir --wheel-dir /wheels -r requirements.txt\n\nFROM python:3.11-slim\nCOPY --from=builder /wheels /wheels\nRUN pip install --no-cache /wheels/*', desc: 'Python avec wheels' }
                            ],
                            tips: ['Image finale jusqu\'√† 10x plus petite avec multi-stage'],
                            warnings: []
                        }
                    },
                    {
                        cmd: 'Cache des layers',
                        desc: 'Optimiser le build avec le cache',
                        details: {
                            explanation: 'Ordonnez les instructions pour maximiser la r√©utilisation du cache Docker.',
                            syntax: 'Ordre optimal: OS deps ‚Üí App deps ‚Üí Code source',
                            options: [
                                { flag: 'COPY package*.json', desc: 'Copier d\'abord les fichiers de d√©pendances' },
                                { flag: 'RUN npm ci', desc: 'Installer les d√©pendances (cach√©es si package.json inchang√©)' },
                                { flag: 'COPY . .', desc: 'Copier le code source en dernier' }
                            ],
                            examples: [
                                { code: '# ‚ùå Mauvais - cache invalid√© √† chaque changement de code\nCOPY . .\nRUN npm install\n\n# ‚úÖ Bon - cache des d√©pendances pr√©serv√©\nCOPY package*.json ./\nRUN npm ci\nCOPY . .', desc: 'Optimisation cache Node.js' },
                                { code: '# Python avec cache\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\nCOPY . .', desc: 'Optimisation cache Python' }
                            ],
                            tips: ['Les instructions qui changent peu doivent √™tre en haut du Dockerfile'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '.dockerignore',
                        desc: 'Exclure des fichiers du build',
                        details: {
                            explanation: 'R√©duit le contexte de build et √©vite de copier des fichiers inutiles.',
                            syntax: 'Patterns similaires √† .gitignore',
                            options: [
                                { flag: 'node_modules', desc: 'Exclure d√©pendances locales' },
                                { flag: '.git', desc: 'Exclure historique Git' },
                                { flag: '*.log', desc: 'Exclure fichiers de log' },
                                { flag: '.env*', desc: 'Exclure variables d\'environnement' }
                            ],
                            examples: [
                                { code: '# .dockerignore\nnode_modules\n.git\n.gitignore\n*.md\n.env*\n.vscode\ncoverage\n*.log\nDockerfile*\ndocker-compose*', desc: 'Exemple complet Node.js' },
                                { code: '# Python .dockerignore\n__pycache__\n*.pyc\n.venv\n.git\n*.egg-info\n.pytest_cache\n.coverage', desc: 'Exemple Python' }
                            ],
                            tips: ['Toujours exclure node_modules et .git'],
                            warnings: ['Sans .dockerignore, tout le r√©pertoire est envoy√© au daemon']
                        }
                    },
                    {
                        cmd: 'Images Alpine/Slim',
                        desc: 'Choisir des images de base l√©g√®res',
                        details: {
                            explanation: 'Utilisez des variantes minimales pour r√©duire taille et surface d\'attaque.',
                            syntax: 'FROM <image>:<tag>-alpine|slim',
                            options: [
                                { flag: 'alpine', desc: 'Image minimale ~5MB (musl libc)' },
                                { flag: 'slim', desc: 'Debian all√©g√©e ~50MB (glibc)' },
                                { flag: 'distroless', desc: 'Google distroless (pas de shell)' }
                            ],
                            examples: [
                                { code: '# Comparaison tailles Python\npython:3.11        # ~900MB\npython:3.11-slim   # ~150MB\npython:3.11-alpine # ~50MB', desc: 'Comparaison images Python' },
                                { code: '# Node.js\nFROM node:18-alpine\nRUN apk add --no-cache dumb-init\nENTRYPOINT ["dumb-init", "--"]', desc: 'Alpine avec init propre' },
                                { code: '# Distroless (ultra secure)\nFROM gcr.io/distroless/python3\nCOPY --from=builder /app /app\nCMD ["app.py"]', desc: 'Image distroless' }
                            ],
                            tips: ['Alpine peut avoir des incompatibilit√©s avec certaines libs (musl vs glibc)'],
                            warnings: ['Testez bien avec Alpine avant de d√©ployer en production']
                        }
                    }
                ]
            },
            {
                id: 'project-docker',
                title: 'üöÄ Projet: Dockerisation App',
                icon: 'fa-rocket',
                color: 'border-l-4 border-rose-500',
                commands: [
                    {
                        cmd: '√âtape 1: Analyse de l\'application',
                        desc: 'Identifier les besoins de l\'app',
                        details: {
                            explanation: 'Avant de dockeriser, analysez les d√©pendances, ports, variables d\'environnement et volumes n√©cessaires.',
                            syntax: 'Checklist pr√©-dockerisation',
                            options: [
                                { flag: 'Runtime', desc: 'Node.js, Python, Go, Java...' },
                                { flag: 'D√©pendances syst√®me', desc: 'Libs natives, compilateurs' },
                                { flag: 'Ports expos√©s', desc: 'HTTP, WebSocket, DB...' },
                                { flag: 'Variables env', desc: 'Configuration, secrets' },
                                { flag: 'Donn√©es persistantes', desc: 'Uploads, logs, DB' }
                            ],
                            examples: [
                                { code: '# Exemple analyse app Node.js\n- Runtime: Node.js 18\n- Deps syst√®me: aucune\n- Port: 3000 (HTTP)\n- Env: DATABASE_URL, JWT_SECRET\n- Volumes: ./uploads (fichiers utilisateurs)', desc: 'Checklist exemple' }
                            ],
                            tips: ['Documentez toutes les d√©pendances avant de commencer'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 2: Dockerfile de d√©veloppement',
                        desc: 'Image avec hot-reload',
                        details: {
                            explanation: 'Cr√©ez d\'abord un Dockerfile.dev pour le d√©veloppement local avec rechargement automatique.',
                            syntax: 'Dockerfile.dev avec volumes mont√©s',
                            options: [],
                            examples: [
                                { code: '# Dockerfile.dev\nFROM node:18-alpine\n\nWORKDIR /app\n\n# D√©pendances\nCOPY package*.json ./\nRUN npm install\n\n# Le code sera mont√© en volume\n# COPY . .  <- pas n√©cessaire en dev\n\nEXPOSE 3000\n\n# Hot reload avec nodemon\nCMD ["npm", "run", "dev"]', desc: 'Dockerfile d√©veloppement' },
                                { code: '# docker-compose.dev.yml\nservices:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile.dev\n    volumes:\n      - .:/app\n      - /app/node_modules\n    ports:\n      - "3000:3000"\n    environment:\n      - NODE_ENV=development', desc: 'Compose dev avec hot-reload' }
                            ],
                            tips: ['Le volume /app/node_modules emp√™che l\'√©crasement des d√©pendances'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 3: Dockerfile de production',
                        desc: 'Image optimis√©e multi-stage',
                        details: {
                            explanation: 'Cr√©ez un Dockerfile optimis√© pour la production avec multi-stage build.',
                            syntax: 'Multi-stage: build ‚Üí production',
                            options: [],
                            examples: [
                                { code: '# Dockerfile (production)\n# === Build stage ===\nFROM node:18-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production\nCOPY . .\nRUN npm run build\n\n# === Production stage ===\nFROM node:18-alpine\nWORKDIR /app\n\n# S√©curit√©: utilisateur non-root\nRUN addgroup -g 1001 -S nodejs && \\\n    adduser -S nodejs -u 1001\n\nCOPY --from=builder --chown=nodejs:nodejs /app/dist ./dist\nCOPY --from=builder --chown=nodejs:nodejs /app/node_modules ./node_modules\n\nUSER nodejs\nEXPOSE 3000\n\nCMD ["node", "dist/index.js"]', desc: 'Dockerfile production Node.js' }
                            ],
                            tips: ['Toujours utiliser un utilisateur non-root en production'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 4: docker-compose.yml',
                        desc: 'Orchestration multi-services',
                        details: {
                            explanation: 'D√©finissez l\'ensemble des services (app, DB, cache, etc.) avec Docker Compose.',
                            syntax: 'docker-compose.yml avec tous les services',
                            options: [],
                            examples: [
                                { code: '# docker-compose.yml\nversion: "3.8"\n\nservices:\n  app:\n    build: .\n    ports:\n      - "3000:3000"\n    environment:\n      - DATABASE_URL=postgres://user:pass@db:5432/mydb\n      - REDIS_URL=redis://cache:6379\n    depends_on:\n      db:\n        condition: service_healthy\n      cache:\n        condition: service_started\n    restart: unless-stopped\n\n  db:\n    image: postgres:15-alpine\n    environment:\n      POSTGRES_USER: user\n      POSTGRES_PASSWORD: pass\n      POSTGRES_DB: mydb\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: ["CMD-SHELL", "pg_isready -U user -d mydb"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n\n  cache:\n    image: redis:7-alpine\n    volumes:\n      - redis_data:/data\n\nvolumes:\n  postgres_data:\n  redis_data:', desc: 'Compose complet avec healthcheck' }
                            ],
                            tips: ['Utilisez depends_on avec condition pour l\'ordre de d√©marrage'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 5: Variables d\'environnement',
                        desc: 'Gestion s√©curis√©e des configs',
                        details: {
                            explanation: 'S√©parez la configuration de l\'image avec des fichiers .env et des secrets.',
                            syntax: 'Fichiers .env + docker secrets',
                            options: [],
                            examples: [
                                { code: '# .env.example (√† versionner)\nDATABASE_URL=postgres://user:pass@db:5432/mydb\nJWT_SECRET=your-secret-here\nNODE_ENV=production\n\n# .env (√† NE PAS versionner)\nDATABASE_URL=postgres://prod:realpass@db:5432/proddb\nJWT_SECRET=super-long-random-secret-here', desc: 'Fichiers .env' },
                                { code: '# docker-compose.yml avec env_file\nservices:\n  app:\n    env_file:\n      - .env\n    # Ou secrets Docker (plus s√©curis√©)\n    secrets:\n      - db_password\n\nsecrets:\n  db_password:\n    file: ./secrets/db_password.txt', desc: 'Utilisation env_file et secrets' }
                            ],
                            tips: ['Ajoutez .env au .gitignore, versionnez .env.example'],
                            warnings: ['Ne jamais hardcoder de secrets dans le Dockerfile ou docker-compose.yml']
                        }
                    },
                    {
                        cmd: '√âtape 6: Build et test local',
                        desc: 'Valider l\'image avant d√©ploiement',
                        details: {
                            explanation: 'Construisez et testez l\'image localement avant de la pousser en production.',
                            syntax: 'docker build + docker compose up',
                            options: [],
                            examples: [
                                { code: '# Build de l\'image\ndocker build -t monapp:1.0 .\n\n# V√©rifier la taille\ndocker images monapp:1.0\n\n# Scanner les vuln√©rabilit√©s\ndocker scout cves monapp:1.0\n\n# Test local\ndocker compose up -d\n\n# V√©rifier les logs\ndocker compose logs -f app\n\n# Test de l\'API\ncurl http://localhost:3000/health', desc: 'Workflow de test complet' }
                            ],
                            tips: ['Toujours scanner les vuln√©rabilit√©s avant de pousser'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 7: Push vers un registre',
                        desc: 'Publier l\'image',
                        details: {
                            explanation: 'Poussez l\'image vers Docker Hub, GitHub Container Registry ou un registre priv√©.',
                            syntax: 'docker tag + docker push',
                            options: [],
                            examples: [
                                { code: '# Docker Hub\ndocker login\ndocker tag monapp:1.0 username/monapp:1.0\ndocker push username/monapp:1.0', desc: 'Push vers Docker Hub' },
                                { code: '# GitHub Container Registry\necho $GITHUB_TOKEN | docker login ghcr.io -u USERNAME --password-stdin\ndocker tag monapp:1.0 ghcr.io/username/monapp:1.0\ndocker push ghcr.io/username/monapp:1.0', desc: 'Push vers GHCR' },
                                { code: '# AWS ECR\naws ecr get-login-password | docker login --username AWS --password-stdin 123456789.dkr.ecr.eu-west-1.amazonaws.com\ndocker tag monapp:1.0 123456789.dkr.ecr.eu-west-1.amazonaws.com/monapp:1.0\ndocker push 123456789.dkr.ecr.eu-west-1.amazonaws.com/monapp:1.0', desc: 'Push vers AWS ECR' }
                            ],
                            tips: ['Utilisez des tags s√©mantiques (v1.0.0) et latest'],
                            warnings: []
                        }
                    },
                    {
                        cmd: '√âtape 8: CI/CD Pipeline',
                        desc: 'Automatiser le build et d√©ploiement',
                        details: {
                            explanation: 'Int√©grez Docker dans votre pipeline CI/CD pour automatiser le processus.',
                            syntax: 'GitHub Actions / GitLab CI',
                            options: [],
                            examples: [
                                { code: '# .github/workflows/docker.yml\nname: Docker Build & Push\non:\n  push:\n    branches: [main]\n    tags: ["v*"]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v3\n      \n      - name: Login to GHCR\n        uses: docker/login-action@v3\n        with:\n          registry: ghcr.io\n          username: ${{ github.actor }}\n          password: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Build and push\n        uses: docker/build-push-action@v5\n        with:\n          context: .\n          push: true\n          tags: |\n            ghcr.io/${{ github.repository }}:latest\n            ghcr.io/${{ github.repository }}:${{ github.sha }}\n          cache-from: type=gha\n          cache-to: type=gha,mode=max', desc: 'GitHub Actions complet' }
                            ],
                            tips: ['Utilisez le cache GHA pour acc√©l√©rer les builds'],
                            warnings: []
                        }
                    }
                ]
            }
        ];
    </script>
    <script src="../js/cheatsheet.js"></script>
</body>
</html>
